# –ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç ¬´–ö–∏–º¬ª

–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –≤ –¥–≤—É—Ö —Ä–µ–∂–∏–º–∞—Ö:
- –õ–æ–∫–∞–ª—å–Ω—ã–π –≥–æ–ª–æ—Å–æ–≤–æ–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è Windows
- –ü—Ä–∏–≤–∞—Ç–Ω—ã–π Telegram-–±–æ—Ç

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ MVP (Stage 1)

–¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è –≤–∫–ª—é—á–∞–µ—Ç:

1. **Telegram-–±–æ—Ç —Å LLM**
   - –î–∏–∞–ª–æ–≥ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º (–∑–∞–ø–æ–º–∏–Ω–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—é —Ä–∞–∑–≥–æ–≤–æ—Ä–∞)
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –º–æ–¥–µ–ª–∏ (–±—ã—Å—Ç—Ä–∞—è/—É–º–Ω–∞—è) –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤
   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–Ω–µ–≤–Ω—ã–º –ª–∏–º–∏—Ç–æ–º —Ç–æ–∫–µ–Ω–æ–≤
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å –ø–æ–Ω—è—Ç–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏

2. **–ì–æ–ª–æ—Å–æ–≤–æ–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç (Windows)**
   - Hotword ¬´–ö–∏–º¬ª –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
   - –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏ (STT) —á–µ—Ä–µ–∑ Vosk
   - –°–∏–Ω—Ç–µ–∑ —Ä–µ—á–∏ (TTS) —á–µ—Ä–µ–∑ Windows SAPI
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å LLM –¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤
   - –ú—è–≥–∫–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ñ—Ä–∞–∑—ã (—Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)
   - –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –ø–æ—Ä–æ–≥ –¥–ª—è hotword
   - –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —à—É–º–æ–ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ (WebRTC VAD)

3. **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ü–ö**
   - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ CPU, RAM, –¥–∏—Å–∫–∞, —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã
   - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ø–æ—Ä–æ–≥–æ–≤
   - –ì–æ–ª–æ—Å–æ–≤—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
/src
  /kim_core      - —è–¥—Ä–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ (–∫–æ–Ω—Ñ–∏–≥, LLM, –ø—Ä–æ–º–ø—Ç—ã, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)
  /kim_voice     - –≥–æ–ª–æ—Å–æ–≤–∞—è —á–∞—Å—Ç—å (hotword, STT, TTS)
  /kim_telegram  - Telegram-–±–æ—Ç
  /kim_scheduler - –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ (Stage 2)
  /kim_desktop   - –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –ü–ö (Stage 2)
  /kim_settings_panel - –ø–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫ (Stage 2)
/tests           - —Ç–µ—Å—Ç—ã
/scripts         - —É—Ç–∏–ª–∏—Ç—ã
/docs            - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Python 3.10+
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `.env.example` –≤ `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash
make install
```

–∏–ª–∏ –≤—Ä—É—á–Ω—É—é:

```bash
pip install -r requirements.txt
```

### –ó–∞–ø—É—Å–∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å —á–µ—Ä–µ–∑ Makefile:

```bash
make bot      # –ó–∞–ø—É—Å–∫ Telegram-–±–æ—Ç–∞
make voice    # –ó–∞–ø—É—Å–∫ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞
make diag     # –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
make test     # –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
make help     # –°–ø—Ä–∞–≤–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç—ã –∑–∞–ø—É—Å–∫–∞ –Ω–∞–ø—Ä—è–º—É—é:

```bash
python -m scripts.run_telegram_bot
python -m scripts.run_voice_assistant
python -m scripts.run_diagnostics_service
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤:

```bash
make test
```

–∏–ª–∏

```bash
pytest tests/ -v
```

–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ —Å–º. —Ä–∞–∑–¥–µ–ª ¬´–ö–∞–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≥–æ–ª–æ—Å–æ–≤–æ–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç¬ª –Ω–∏–∂–µ.

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ —Ñ–∞–π–ª–∞ `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞.

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤

**–í–∞–∂–Ω–æ:** –°–µ–∫—Ä–µ—Ç—ã (API-–∫–ª—é—á–∏ –∏ —Ç–æ–∫–µ–Ω—ã) —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ Windows Credential Manager —á–µ—Ä–µ–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫—É `keyring`, –∞ –Ω–µ –≤ —Ñ–∞–π–ª–µ `.env`.

**–ö–∞–∫ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã –æ–¥–∏–Ω —Ä–∞–∑:**

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±–∏–±–ª–∏–æ—Ç–µ–∫—É keyring** (–µ—Å–ª–∏ –µ—â—ë –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞):
   ```bash
   pip install keyring
   ```

2. **–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**
   ```bash
   python scripts/set_secrets.py
   ```
   –°–∫—Ä–∏–ø—Ç –ø–æ–ø—Ä–æ—Å–∏—Ç –≤–≤–µ—Å—Ç–∏ API-–∫–ª—é—á OpenRouter –∏ —Ç–æ–∫–µ–Ω Telegram-–±–æ—Ç–∞, –∑–∞—Ç–µ–º —Å–æ—Ö—Ä–∞–Ω–∏—Ç –∏—Ö –≤ keyring.

3. **–ò–ª–∏ —á–µ—Ä–µ–∑ Python –Ω–∞–ø—Ä—è–º—É—é:**
   ```python
   from kim_core.secret_store import set_secret
   
   # –°–æ—Ö—Ä–∞–Ω–∏—Ç—å API-–∫–ª—é—á OpenRouter
   set_secret("openrouter_api_key", "–≤–∞—à_–∫–ª—é—á_–∑–¥–µ—Å—å")
   
   # –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ–∫–µ–Ω Telegram-–±–æ—Ç–∞
   set_secret("telegram_bot_token", "–≤–∞—à_—Ç–æ–∫–µ–Ω_–∑–¥–µ—Å—å")
   ```

4. **–ò–ª–∏ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω–æ):**
   - –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –µ—Å–ª–∏ –≤ `.env` –∏–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –µ—Å—Ç—å `OPENROUTER_API_KEY` –∏–ª–∏ `BOT_TOKEN`, –æ–Ω–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è –≤ keyring –∏ –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã –∏–∑ –ø—Ä–æ—Ü–µ—Å—Å–∞.
   - –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —Å–µ–∫—Ä–µ—Ç—ã –±—É–¥—É—Ç —á–∏—Ç–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –∏–∑ keyring.

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö —Å–µ–∫—Ä–µ—Ç–æ–≤:**
```python
from kim_core.secret_store import get_secret

api_key = get_secret("openrouter_api_key")
bot_token = get_secret("telegram_bot_token")
```

**–£–¥–∞–ª–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤:**
```python
from kim_core.secret_store import delete_secret

delete_secret("openrouter_api_key")
delete_secret("telegram_bot_token")
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ï—Å–ª–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ `keyring` –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞, —Å–µ–∫—Ä–µ—Ç—ã –±—É–¥—É—Ç —á–∏—Ç–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞).

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

- `MODE` ‚Äî —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã (`dev` –∏–ª–∏ `prod`). –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: `dev`
- `LOG_LEVEL` ‚Äî —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (`DEBUG`, `INFO`, `WARNING`, `ERROR`). –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: `INFO`
- `OPENROUTER_API_KEY` ‚Äî API-–∫–ª—é—á –¥–ª—è OpenRouter (–æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –≤ —Ä–µ–∂–∏–º–µ `prod`, **—Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ keyring**)
- `BOT_TOKEN` ‚Äî —Ç–æ–∫–µ–Ω Telegram-–±–æ—Ç–∞ (–æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –≤ —Ä–µ–∂–∏–º–µ `prod`, **—Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ keyring**)
- `MODEL_FAST` ‚Äî –±—ã—Å—Ç—Ä–∞—è –º–æ–¥–µ–ª—å LLM. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: `openai/gpt-3.5-turbo`
- `MODEL_SMART` ‚Äî —É–º–Ω–∞—è –º–æ–¥–µ–ª—å LLM –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–¥–∞—á. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: `openai/gpt-4-turbo`
- `TOKEN_BUDGET_DAILY` ‚Äî –¥–Ω–µ–≤–Ω–æ–π –ª–∏–º–∏—Ç —Ç–æ–∫–µ–Ω–æ–≤. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: `50000`
- `LLM_TIMEOUT_SECONDS` ‚Äî —Ç–∞–π–º–∞—É—Ç –¥–ª—è LLM-–∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: `15.0`
- `LOCAL_ONLY` ‚Äî —Ä–µ–∂–∏–º —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω–æ (`0` –∏–ª–∏ `1`). –ï—Å–ª–∏ `1`, –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –Ω–µ –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ LLM –∏ –¥–∞—ë—Ç —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω—ã–µ –≥–æ–ª–æ—Å–æ–≤—ã–µ –æ—Ç–≤–µ—Ç—ã. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: `0`
- `CPU_WARN` ‚Äî –ø–æ—Ä–æ–≥ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ CPU (–≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö). –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: `85`
- `RAM_WARN` ‚Äî –ø–æ—Ä–æ–≥ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è RAM (–≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö). –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: `90`
- `DISK_WARN` ‚Äî –ø–æ—Ä–æ–≥ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–∏—Å–∫–∞ (–≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö). –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: `90`
- `TEMP_WARN` ‚Äî –ø–æ—Ä–æ–≥ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –¥–ª—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã (–≤ –≥—Ä–∞–¥—É—Å–∞—Ö –¶–µ–ª—å—Å–∏—è). –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: –Ω–µ –∑–∞–¥–∞–Ω
- `DIAGNOSTICS_INTERVAL_SECONDS` ‚Äî –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: `60`
- `ALERTS_CHAT_ID` ‚Äî ID —á–∞—Ç–∞/–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Telegram –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å–∏—Å—Ç–µ–º—ã. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: –Ω–µ –∑–∞–¥–∞–Ω
- `REMINDERS_DB_PATH` ‚Äî –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∫–∞–ª–µ–Ω–¥–∞—Ä—è. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: `data/calendar.db`
- `REMINDERS_INTERVAL_SECONDS` ‚Äî –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –≤ —Å–µ–∫—É–Ω–¥–∞—Ö. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: `60`
- `SERPAPI_KEY` ‚Äî API-–∫–ª—é—á SerpAPI –¥–ª—è –≤–µ–±-–ø–æ–∏—Å–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è DuckDuckGo). –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: –Ω–µ –∑–∞–¥–∞–Ω
- `WEB_SEARCH_MAX_RESULTS` ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: `5`
- `FILE_WHITELIST_DIRS` ‚Äî –±–µ–ª—ã–π —Å–ø–∏—Å–æ–∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –¥–ª—è —á—Ç–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ (–ø—É—Ç–∏ —Ä–∞–∑–¥–µ–ª–µ–Ω—ã `;` –∏–ª–∏ `:`). –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: –Ω–µ –∑–∞–¥–∞–Ω (–¥–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â—ë–Ω)
- `FILE_MAX_SIZE_MB` ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –≤ –ú–ë. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: `10`
- `FILE_SUMMARY_MAX_CHARS` ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ —Ç–µ–∫—Å—Ç–∞ —Ñ–∞–π–ª–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ LLM. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: `20000`

**–í–∞–∂–Ω–æ:** –°–µ–∫—Ä–µ—Ç—ã (`OPENROUTER_API_KEY` –∏ `BOT_TOKEN`) **–Ω–µ –¥–æ–ª–∂–Ω—ã** —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ —Ñ–∞–π–ª–µ `.env` –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏. –û–Ω–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ Windows Credential Manager –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ, –µ—Å–ª–∏ –±—ã–ª–∏ —É–∫–∞–∑–∞–Ω—ã –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è.

–í —Ä–µ–∂–∏–º–µ `prod` –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö —Å–µ–∫—Ä–µ—Ç–æ–≤ (–≤ keyring –∏–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è) –∏ –≤—ã–¥–∞—ë—Ç –æ—à–∏–±–∫—É –ø—Ä–∏ –∏—Ö –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏.

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å OpenRouter

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç OpenRouter API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å LLM-–º–æ–¥–µ–ª—è–º–∏ —á–µ—Ä–µ–∑ –¥–≤–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:

### OpenRouterClient

–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–ª–∏–µ–Ω—Ç –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å OpenRouter API. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã, –æ—à–∏–±–∫–∏ —Å–µ—Ç–∏ –∏ –ø–∞—Ä—Å–∏—Ç –æ—Ç–≤–µ—Ç—ã —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ç–æ–∫–µ–Ω–æ–≤.

### LLMRouter

–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä –º–æ–¥–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–π:

- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ—Ç –º–æ–¥–µ–ª—å** –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∑–∞–ø—Ä–æ—Å–∞:
  - –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±—ã—Å—Ç—Ä—É—é –º–æ–¥–µ–ª—å (`MODEL_FAST`)
  - –ü–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ —É–º–Ω—É—é –º–æ–¥–µ–ª—å (`MODEL_SMART`) –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤

- **–£–ø—Ä–∞–≤–ª—è–µ—Ç –¥–Ω–µ–≤–Ω—ã–º –ª–∏–º–∏—Ç–æ–º —Ç–æ–∫–µ–Ω–æ–≤** (`TOKEN_BUDGET_DAILY`):
  - –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –∑–∞ –¥–µ–Ω—å
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç —Å—á—ë—Ç—á–∏–∫ –ø—Ä–∏ —Å–º–µ–Ω–µ –¥–∞—Ç—ã
  - –ë–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞

### –¢—Ä–∏–≥–≥–µ—Ä—ã –¥–ª—è —É–º–Ω–æ–π –º–æ–¥–µ–ª–∏

–î–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –Ω–∞ –±–æ–ª–µ–µ –º–æ—â–Ω—É—é –º–æ–¥–µ–ª—å –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤ –∑–∞–ø—Ä–æ—Å–µ –æ–¥–Ω—É –∏–∑ —Ñ—Ä–∞–∑:

- ¬´—Ä–µ—à–∏ —ç—Ç–æ GPT-5¬ª
- ¬´—Ä–µ–∂–∏–º –∫–∞—á–µ—Å—Ç–≤–∞¬ª
- ¬´–Ω—É–∂–µ–Ω –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑¬ª

–¢—Ä–∏–≥–≥–µ—Ä–Ω—ã–µ —Ñ—Ä–∞–∑—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ LLM.

## –ó–∞–ø—É—Å–∫ Telegram-–±–æ—Ç–∞

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ `.env.example`:
   ```bash
   cp .env.example .env
   ```

2. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ keyring (—Å–º. —Ä–∞–∑–¥–µ–ª ¬´–ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤¬ª –≤—ã—à–µ):
   - –ó–∞–ø—É—Å—Ç–∏—Ç–µ: `python scripts/set_secrets.py`
   - –ò–ª–∏ –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ Python (—Å–º. –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤—ã—à–µ)
   
   **–í–∞–∂–Ω–æ:** –°–µ–∫—Ä–µ—Ç—ã (`BOT_TOKEN` –∏ `OPENROUTER_API_KEY`) —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ Windows Credential Manager, –∞ –Ω–µ –≤ `.env`.

3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–µ—Å–ª–∏ –µ—â—ë –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã):
   ```bash
   pip install -r requirements.txt
   ```

### –ó–∞–ø—É—Å–∫

#### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ Makefile (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
make bot
```

#### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞

```bash
python -m scripts.run_telegram_bot
```

#### –í–∞—Ä–∏–∞–Ω—Ç 3: –ü—Ä—è–º–æ–π –∑–∞–ø—É—Å–∫ –º–æ–¥—É–ª—è

```bash
python run_bot.py
```

–∏–ª–∏

```bash
cd src && python -m kim_telegram.main
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç –±—É–¥–µ—Ç –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Telegram:

- **`/start`** ‚Äî –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –ö–∏–º
- **`/help`** ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥
- **`/reset`** ‚Äî –æ—á–∏—Å—Ç–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–∏–∞–ª–æ–≥–∞ (–Ω–∞—á–∞—Ç—å —Ä–∞–∑–≥–æ–≤–æ—Ä –∑–∞–Ω–æ–≤–æ)
- **`/myid`** ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤–∞—à Chat ID (–¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏)
- **–û–±—ã—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ** ‚Äî –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ LLM, —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤—Å–µ–π –ø–µ—Ä–µ–ø–∏—Å–∫–∏

–ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–∏–∞–ª–æ–≥–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –í—ã–±–∏—Ä–∞–µ—Ç –º–æ–¥–µ–ª—å (–±—ã—Å—Ç—Ä—É—é –∏–ª–∏ —É–º–Ω—É—é) –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –¥–Ω–µ–≤–Ω–æ–π –ª–∏–º–∏—Ç —Ç–æ–∫–µ–Ω–æ–≤
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ –∏ —É–≤–µ–¥–æ–º–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –ü—Ä–∏–º–µ—Ä—ã —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –¥–ª—è —É–º–Ω–æ–π –º–æ–¥–µ–ª–∏

–î–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –Ω–∞ –±–æ–ª–µ–µ –º–æ—â–Ω—É—é –º–æ–¥–µ–ª—å –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏:
- ¬´—Ä–µ—à–∏ —ç—Ç–æ GPT-5¬ª
- ¬´—Ä–µ–∂–∏–º –∫–∞—á–µ—Å—Ç–≤–∞¬ª
- ¬´–Ω—É–∂–µ–Ω –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑¬ª

## –ì–æ–ª–æ—Å–æ–≤–æ–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç (–ª–æ–∫–∞–ª—å–Ω–æ, Windows)

–ì–æ–ª–æ—Å–æ–≤–æ–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ –Ω–∞ Windows –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –ø–æ –∫–ª—é—á–µ–≤–æ–º—É —Å–ª–æ–≤—É ¬´–ö–∏–º¬ª.

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

1. **–ú–æ–¥–µ–ª—å Vosk** –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ä–µ—á–∏ (—Å–º. —Ä–∞–∑–¥–µ–ª ¬´–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–æ–¥–µ–ª–∏ Vosk¬ª –Ω–∏–∂–µ)
2. **–ú–∏–∫—Ä–æ—Ñ–æ–Ω** –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–¥–∫–ª—é—á—ë–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ Windows
3. **API –∫–ª—é—á OpenRouter** –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å LLM:
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ `OPENROUTER_API_KEY` –≤ keyring (—Å–º. —Ä–∞–∑–¥–µ–ª ¬´–ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤¬ª)
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–∞ –±–∞–ª–∞–Ω—Å–µ –µ—Å—Ç—å —Å—Ä–µ–¥—Å—Ç–≤–∞

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–æ–¥–µ–ª–∏ Vosk

**–í–∞–∂–Ω–æ:** –î–ª—è —Ä–∞–±–æ—Ç—ã –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –º–æ–¥–µ–ª—å Vosk –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ä–µ—á–∏.

1. **–°–∫–∞—á–∞–π—Ç–µ –º–æ–¥–µ–ª—å Vosk:**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://alphacephei.com/vosk/models
   - –î–ª—è —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º —Å–∫–∞—á–∞—Ç—å –æ–¥–Ω—É –∏–∑ –º–æ–¥–µ–ª–µ–π:
     - `vosk-model-small-ru-0.22` (‚âà45 –ú–ë) ‚Äî –±—ã—Å—Ç—Ä–∞—è, –Ω–æ –º–µ–Ω–µ–µ —Ç–æ—á–Ω–∞—è
     - `vosk-model-ru-0.42` (‚âà1.8 –ì–ë) ‚Äî –±–æ–ª–µ–µ —Ç–æ—á–Ω–∞—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
     - `vosk-model-ru-0.22` (‚âà1.5 –ì–ë) ‚Äî —Ö–æ—Ä–æ—à–∏–π –±–∞–ª–∞–Ω—Å

2. **–†–∞—Å–ø–∞–∫—É–π—Ç–µ –º–æ–¥–µ–ª—å:**
   - –°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É `models` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ (–µ—Å–ª–∏ –µ—ë –Ω–µ—Ç)
   - –†–∞—Å–ø–∞–∫—É–π—Ç–µ —Å–∫–∞—á–∞–Ω–Ω—É—é –º–æ–¥–µ–ª—å —Ç–∞–∫, —á—Ç–æ–±—ã —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –±—ã–ª–∞:
     ```
     models/
       vosk-ru/
         am/
         graph/
         ivector/
         ...
     ```
   - –ò–º—è –ø–∞–ø–∫–∏ `vosk-ru` –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±—ã–º, –Ω–æ –¥–æ–ª–∂–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –ø—É—Ç–∏ –≤ `.env`

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—É—Ç—å –≤ `.env`:**
   ```env
   VOSK_MODEL_PATH=models/vosk-ru
   ```
   
   –ò–ª–∏ —É–∫–∞–∂–∏—Ç–µ –ø–æ–ª–Ω—ã–π –ø—É—Ç—å –∫ –º–æ–¥–µ–ª–∏, –µ—Å–ª–∏ –æ–Ω–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –¥—Ä—É–≥–æ–º –º–µ—Å—Ç–µ:
   ```env
   VOSK_MODEL_PATH=C:/path/to/vosk-model-ru-0.42
   ```

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É:**
   ```bash
   python scripts/check_voice_system.py
   ```
   
   –°–∫—Ä–∏–ø—Ç –ø–æ–∫–∞–∂–µ—Ç, –Ω–∞–π–¥–µ–Ω–∞ –ª–∏ –º–æ–¥–µ–ª—å –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞ –ª–∏ –µ—ë —Å—Ç—Ä—É–∫—Ç—É—Ä–∞.

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
   ```bash
   pip install -r requirements.txt
   ```

### Runtime-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)

–ì–æ–ª–æ—Å–æ–≤–æ–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ runtime-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω—è—Ç—å –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `data/runtime_settings.json` (–ø—É—Ç—å –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `RUNTIME_SETTINGS_PATH`).

**–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫:**
- –ì–æ–ª–æ—Å–æ–≤–æ–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—á–∏—Ç—ã–≤–∞–µ—Ç runtime-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ —Ñ–∞–π–ª–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî –ø—Ä–∏ –∫–∞–∂–¥–æ–º –Ω–æ–≤–æ–º –æ–±—Ä–∞—â–µ–Ω–∏–∏ "–ö–∏–º").
- –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –º–µ–Ω—è—Ç—å —Ä–µ–∂–∏–º `local_only`, –≥–æ–ª–æ—Å (—Å–∫–æ—Ä–æ—Å—Ç—å –∏ –≥—Ä–æ–º–∫–æ—Å—Ç—å), –ª–∏–º–∏—Ç—ã —Ç–æ–∫–µ–Ω–æ–≤ –∏ –¥—Ä—É–≥–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —á–µ—Ä–µ–∑ –ø–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞.
- –ü—Ä–∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ —Ñ–∞–π–ª–∞ —Å—Ç–∞—Ä—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è, –∞ –æ—à–∏–±–∫–∞ –ø–∏—à–µ—Ç—Å—è –≤ –ª–æ–≥.

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `local_only` ‚Äî —Ä–µ–∂–∏–º —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω–æ (–±–µ–∑ LLM)
- `tts_rate` ‚Äî —Å–∫–æ—Ä–æ—Å—Ç—å —Ä–µ—á–∏ (-10 –¥–æ 10 –¥–ª—è COM)
- `tts_volume` ‚Äî –≥—Ä–æ–º–∫–æ—Å—Ç—å (0-100)
- `model_fast`, `model_smart` ‚Äî –º–æ–¥–µ–ª–∏ LLM
- `token_budget_daily` ‚Äî –¥–Ω–µ–≤–Ω–æ–π –ª–∏–º–∏—Ç —Ç–æ–∫–µ–Ω–æ–≤
- `voice_telegram_chat_id` ‚Äî Chat ID –¥–ª—è –≥–æ–ª–æ—Å–æ–≤—ã—Ö –æ—Ç–ø—Ä–∞–≤–æ–∫ –≤ Telegram

**–ü—Ä–æ—Ñ–∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫:**

–ü–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª–∏ –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

- **Quality (–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ)** ‚Äî –º–∞–∫—Å–∏–º—É–º –∫–∞—á–µ—Å—Ç–≤–∞, –±–æ–ª–µ–µ "—É–º–Ω—ã–µ" –º–æ–¥–µ–ª–∏, –≤—ã—à–µ –ª–∏–º–∏—Ç—ã —Ç–æ–∫–µ–Ω–æ–≤ (200,000/–¥–µ–Ω—å), –æ–ø—Ç–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å —Ä–µ—á–∏ –¥–ª—è —Ä–∞–∑–±–æ—Ä—á–∏–≤–æ—Å—Ç–∏
- **Balanced (–°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π)** ‚Äî –∫–æ–º–ø—Ä–æ–º–∏—Å—Å –º–µ–∂–¥—É –∫–∞—á–µ—Å—Ç–≤–æ–º –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é, —Å—Ä–µ–¥–Ω–∏–µ –ª–∏–º–∏—Ç—ã (50,000/–¥–µ–Ω—å)
- **Performance (–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)** ‚Äî —É–ø–æ—Ä –Ω–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞—Å—Ö–æ–¥ —Ç–æ–∫–µ–Ω–æ–≤ (20,000/–¥–µ–Ω—å) –∏ —Å–∫–æ—Ä–æ—Å—Ç—å, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–æ–ª–µ–µ –±—ã—Å—Ç—Ä—ã—Ö/–¥–µ—à—ë–≤—ã—Ö –º–æ–¥–µ–ª–µ–π

–ü—Ä–∏ –≤—ã–±–æ—Ä–µ –ø—Ä–æ—Ñ–∏–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑–º–µ–Ω—è—é—Ç—Å—è (–º–æ–¥–µ–ª–∏, –ª–∏–º–∏—Ç—ã, —Å–∫–æ—Ä–æ—Å—Ç—å —Ä–µ—á–∏). –ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –ø—Ä–æ—Ñ–∏–ª—è –∏—Ö –º–æ–∂–Ω–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤—Ä—É—á–Ω—É—é ‚Äî —Ç–µ–∫—É—â–∏–π –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, –Ω–æ —Ä—É—á–Ω—ã–µ –ø—Ä–∞–≤–∫–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –ø–æ–≤–µ—Ä—Ö –Ω–µ–≥–æ.

**–ì–æ—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:**

–ü–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç—Ä–∏ –≥–æ—Ç–æ–≤—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –æ–±—ä–µ–¥–∏–Ω—è—é—Ç —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã –∏ –ø—Ä–æ—Ñ–∏–ª—å –∫–∞—á–µ—Å—Ç–≤–∞:

- **–î–æ–º–∞—à–Ω–∏–π –≥–æ–ª–æ—Å–æ–≤–æ–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç** ‚Äî –≥–æ–ª–æ—Å–æ–≤–æ–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç + Telegram, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç LLM –∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–ø–æ–∏—Å–∫ (–µ—Å–ª–∏ –≤–∫–ª—é—á—ë–Ω), —Ä–∞—Å—Å—á–∏—Ç–∞–Ω –Ω–∞ –∫–æ–º—Ñ–æ—Ä—Ç –∏ –∫–∞—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–æ–≤. –†–µ–∂–∏–º: `voice_assistant`, –ø—Ä–æ—Ñ–∏–ª—å: `quality`.

- **–õ—ë–≥–∫–∏–π Telegram-–ø–æ–º–æ—â–Ω–∏–∫** ‚Äî —Ç–æ–ª—å–∫–æ Telegram-–±–æ—Ç, –±–µ–∑ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ —Ä–µ–∂–∏–º–∞, –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∏–µ –ª–∏–º–∏—Ç—ã —Ç–æ–∫–µ–Ω–æ–≤ –∏/–∏–ª–∏ –±–æ–ª–µ–µ –¥–µ—à—ë–≤—ã–µ –º–æ–¥–µ–ª–∏. –†–µ–∂–∏–º: `telegram_only`, –ø—Ä–æ—Ñ–∏–ª—å: `performance`.

- **–ü–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ñ–ª–∞–π–Ω –Ω–∞—Å—Ç–æ–ª—å–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç** ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å, –±–µ–∑ LLM –∏ web search, —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (–Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è, –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞, –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –∏ —Ç.–ø.). –†–µ–∂–∏–º: `offline`, –ø—Ä–æ—Ñ–∏–ª—å: `balanced`.

–°—Ü–µ–Ω–∞—Ä–∏–π –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –æ–¥–Ω–∏–º –Ω–∞–∂–∞—Ç–∏–µ–º –≤ –ø–∞–Ω–µ–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫. –ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ —Å—Ü–µ–Ω–∞—Ä–∏—è –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–∂–Ω–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤—Ä—É—á–Ω—É—é ‚Äî —Å—Ü–µ–Ω–∞—Ä–∏–π –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫–∞–∫ –æ—Å–Ω–æ–≤–∞, –ø–æ–≤–µ—Ä—Ö –∫–æ—Ç–æ—Ä–æ–π –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∫–∏.

- **–î–æ–º–∞—à–Ω–∏–π –≥–æ–ª–æ—Å–æ–≤–æ–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç** ‚Äî –≥–æ–ª–æ—Å–æ–≤–æ–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç + Telegram, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç LLM –∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–ø–æ–∏—Å–∫ (–µ—Å–ª–∏ –≤–∫–ª—é—á—ë–Ω), —Ä–∞—Å—Å—á–∏—Ç–∞–Ω –Ω–∞ –∫–æ–º—Ñ–æ—Ä—Ç –∏ –∫–∞—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–æ–≤. –†–µ–∂–∏–º: `voice_assistant`, –ø—Ä–æ—Ñ–∏–ª—å: `quality`.

- **–õ—ë–≥–∫–∏–π Telegram-–ø–æ–º–æ—â–Ω–∏–∫** ‚Äî —Ç–æ–ª—å–∫–æ Telegram-–±–æ—Ç, –±–µ–∑ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ —Ä–µ–∂–∏–º–∞, –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∏–µ –ª–∏–º–∏—Ç—ã —Ç–æ–∫–µ–Ω–æ–≤ –∏/–∏–ª–∏ –±–æ–ª–µ–µ –¥–µ—à—ë–≤—ã–µ –º–æ–¥–µ–ª–∏. –†–µ–∂–∏–º: `telegram_only`, –ø—Ä–æ—Ñ–∏–ª—å: `performance`.

- **–ü–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ñ–ª–∞–π–Ω –Ω–∞—Å—Ç–æ–ª—å–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç** ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å, –±–µ–∑ LLM –∏ web search, —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (–Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è, –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞, –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –∏ —Ç.–ø.). –†–µ–∂–∏–º: `offline`, –ø—Ä–æ—Ñ–∏–ª—å: `balanced`.

–°—Ü–µ–Ω–∞—Ä–∏–π –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –æ–¥–Ω–∏–º –Ω–∞–∂–∞—Ç–∏–µ–º –≤ –ø–∞–Ω–µ–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫. –ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ —Å—Ü–µ–Ω–∞—Ä–∏—è –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–∂–Ω–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤—Ä—É—á–Ω—É—é ‚Äî —Ç–µ–∫—É—â–∏–π –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, –Ω–æ —Ä—É—á–Ω—ã–µ –ø—Ä–∞–≤–∫–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –ø–æ–≤–µ—Ä—Ö –Ω–µ–≥–æ.

### –ó–∞–ø—É—Å–∫

#### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ Makefile (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
make voice
```

#### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞

```bash
python -m scripts.run_voice_assistant
```

#### –í–∞—Ä–∏–∞–Ω—Ç 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ PowerShell —Å–∫—Ä–∏–ø—Ç–∞ (–¥–ª—è Windows —Å UTF-8)

–î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä—É—Å—Å–∫–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤ –≤ –ª–æ–≥–∞—Ö:

```powershell
.\run_voice_utf8.ps1
```

#### –í–∞—Ä–∏–∞–Ω—Ç 4: –ü—Ä—è–º–æ–π –∑–∞–ø—É—Å–∫ –º–æ–¥—É–ª—è

```bash
python run_voice.py
```

–∏–ª–∏

```bash
python -m src.kim_voice.main
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä—É—Å—Å–∫–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤ –≤ Windows PowerShell —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –í–∞—Ä–∏–∞–Ω—Ç 3 –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–æ–¥–∏—Ä–æ–≤–∫—É –≤—Ä—É—á–Ω—É—é.

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ Vosk

–ï—Å–ª–∏ hotword ¬´–ö–∏–º¬ª –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏–ª–∏ –≤—ã –ø–æ–¥–æ–∑—Ä–µ–≤–∞–µ—Ç–µ –ø—Ä–æ–±–ª–µ–º—ã —Å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ–º —Ä–µ—á–∏,
–º–æ–∂–Ω–æ –æ—Ç–¥–µ–ª—å–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–≤—è–∑–∫—É **Vosk + –º–∏–∫—Ä–æ—Ñ–æ–Ω** –±–µ–∑ hotword-–ª–æ–≥–∏–∫–∏.

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç:

```bash
python -m scripts.test_vosk_mic
```

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ:

- –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –º–æ–¥–µ–ª—å Vosk, —É–∫–∞–∑–∞–Ω–Ω–∞—è –≤ `VOSK_MODEL_PATH` –∏–ª–∏ `models/vosk-ru`,
- –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –º–∏–∫—Ä–æ—Ñ–æ–Ω,
- –≤ —Ç–µ—á–µ–Ω–∏–µ ~15 —Å–µ–∫—É–Ω–¥ –∞—É–¥–∏–æ —Å –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ Vosk.

–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:

- –ø—Ä–∏ —Ä–∞–∑–≥–æ–≤–æ—Ä–µ –≤ –º–∏–∫—Ä–æ—Ñ–æ–Ω –≤ **stdout** –∏ –≤ –ª–æ–≥–∞—Ö –≤—ã —É–≤–∏–¥–∏—Ç–µ:
  - —Å—Ç—Ä–æ–∫–∏ –≤–∏–¥–∞ `[PARTIAL] ...` ‚Äî –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ (partial) —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã Vosk,
  - —Å—Ç—Ä–æ–∫–∏ –≤–∏–¥–∞ `[FINAL] ...` ‚Äî —Ñ–∏–Ω–∞–ª—å–Ω—ã–µ (final) —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã Vosk.
- –µ—Å–ª–∏ partial/final —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –Ω–µ—Ç –≤–æ–æ–±—â–µ ‚Äî –ø—Ä–æ–±–ª–µ–º–∞, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –≤:
  - –¥–æ—Å—Ç—É–ø–µ –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É,
  - —É—Å—Ç–∞–Ω–æ–≤–∫–µ/–ø—É—Ç–∏ –∫ –º–æ–¥–µ–ª–∏ Vosk,
  - –æ–∫—Ä—É–∂–µ–Ω–∏–∏ –∞—É–¥–∏–æ–¥—Ä–∞–π–≤–µ—Ä–æ–≤.

–≠—Ç–æ—Ç —Ç–µ—Å—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç –±—ã—Å—Ç—Ä–æ –æ—Ç–¥–µ–ª–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã Vosk/–º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ –æ—Ç –ª–æ–≥–∏–∫–∏ hotword –∏ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞.

### –ö–∞–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≥–æ–ª–æ—Å–æ–≤–æ–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç

–î–ª—è —Å–∏—Å—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –ø–æ—Å–ª–µ —É–ª—É—á—à–µ–Ω–∏–π STT/hotword —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è. –û–Ω –≤–∫–ª—é—á–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É –∫–∞—á–µ—Å—Ç–≤–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è, —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ hotword, –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–≥–æ –ø–æ—Ä–æ–≥–∞, VAD –∏ UX –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.

**–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**

```bash
# –¢–µ—Å—Ç Vosk + –º–∏–∫—Ä–æ—Ñ–æ–Ω (–±–∞–∑–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞)
python -m scripts.test_vosk_mic

# –¢–µ—Å—Ç STT (—Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –æ–¥–Ω–æ–π —Ñ—Ä–∞–∑—ã —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏)
python -m scripts.test_stt_once

# –ü–æ–ª–Ω—ã–π –≥–æ–ª–æ—Å–æ–≤–æ–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç
python run_voice_utf8.ps1
```

**–ü–æ–¥—Ä–æ–±–Ω—ã–π –ø–ª–∞–Ω —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è** –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ñ–∞–π–ª–µ [`docs/voice_testing_plan.md`](docs/voice_testing_plan.md). –ü–ª–∞–Ω –≤–∫–ª—é—á–∞–µ—Ç:

- –ë–∞–∑–æ–≤—ã–π —Ç–µ—Å—Ç Vosk + –º–∏–∫—Ä–æ—Ñ–æ–Ω
- –¢–µ—Å—Ç STT —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ –¥–ª–∏–Ω—ã –∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏
- –¢–µ—Å—Ç hotword –±–µ–∑ LLM (LOCAL_ONLY=1)
- –¢–µ—Å—Ç –ø–æ–ª–Ω–æ–≥–æ –∫–æ–Ω–≤–µ–π–µ—Ä–∞ (hotword ‚Üí STT ‚Üí LLM ‚Üí TTS)
- –¢–µ—Å—Ç –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–≥–æ –ø–æ—Ä–æ–≥–∞ (—à—É–º–Ω–∞—è vs —Ç–∏—Ö–∞—è —Å—Ä–µ–¥–∞)
- –¢–µ—Å—Ç VAD (–µ—Å–ª–∏ –≤–∫–ª—é—á—ë–Ω)
- –¢–µ—Å—Ç UX –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Ñ—Ä–∞–∑—ã
- –†–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ö–∞–∂–¥—ã–π —Ç–µ—Å—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –æ–ø–∏—Å–∞–Ω–∏–µ —Ü–µ–ª–∏, –ø–æ–¥–≥–æ—Ç–æ–≤–∫—É, –∫–æ–º–∞–Ω–¥—ã –∑–∞–ø—É—Å–∫–∞, –æ–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏.

### –ì–æ–ª–æ—Å–æ–≤–æ–π –¥–∏–∞–ª–æ–≥ —Å LLM

–ü–æ—Å–ª–µ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –ø–æ –∫–ª—é—á–µ–≤–æ–º—É —Å–ª–æ–≤—É ¬´–ö–∏–º¬ª –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç:

1. **–û—Ç–≤–µ—á–∞–µ—Ç –≥–æ–ª–æ—Å–æ–º:** ¬´–î–∞, —Å–ª—É—à–∞—é.¬ª
2. **–°–ª—É—à–∞–µ—Ç –≤–æ–ø—Ä–æ—Å** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ –º–∏–∫—Ä–æ—Ñ–æ–Ω (—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –ø–æ–≤—Ç–æ—Ä–∞–º–∏ –ø—Ä–∏ –Ω–µ—É–¥–∞—á–Ω–æ–º —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–∏)
3. **–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—É—é —Ñ—Ä–∞–∑—É:** ¬´–í—ã —Å–∫–∞–∑–∞–ª–∏: [—Ñ—Ä–∞–∑–∞]. –í–µ—Ä–Ω–æ?¬ª
4. **–°–ª—É—à–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (¬´–¥–∞¬ª/¬´–Ω–µ—Ç¬ª)
5. **–ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∫–∞–∑–∞–ª ¬´–Ω–µ—Ç¬ª:** –ø—Ä–æ—Å–∏—Ç –ø–æ–≤—Ç–æ—Ä–∏—Ç—å —Ñ—Ä–∞–∑—É –∑–∞–Ω–æ–≤–æ
6. **–ü–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è:**
   - –ï—Å–ª–∏ `LOCAL_ONLY=0`: –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤–æ–ø—Ä–æ—Å –≤ LLM —á–µ—Ä–µ–∑ OpenRouter
   - –ï—Å–ª–∏ `LOCAL_ONLY=1`: –¥–∞—ë—Ç –ª–æ–∫–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç (–±–µ–∑ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É)
7. **–û–∑–≤—É—á–∏–≤–∞–µ—Ç –æ—Ç–≤–µ—Ç** –≥–æ–ª–æ—Å–æ–º (TTS)

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ¬´–ö–∏–º¬ª (hotword –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω)
- –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç: ¬´–î–∞, —Å–ª—É—à–∞—é.¬ª (–≥–æ–ª–æ—Å–æ–º)
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ¬´–†–∞—Å—Å–∫–∞–∂–∏ –∫—Ä–∞—Ç–∫–æ –Ω–æ–≤–æ—Å—Ç–∏ –∑–∞ —Å–µ–≥–æ–¥–Ω—è¬ª (–≥–æ–ª–æ—Å–æ–º)
- –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç: –û–∑–≤—É—á–∏–≤–∞–µ—Ç –æ—Ç–≤–µ—Ç, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –æ—Ç LLM (–±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è, –µ—Å–ª–∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤—ã—Å–æ–∫–∞—è)

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ä–µ—á–∏

–ê—Å—Å–∏—Å—Ç–µ–Ω—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ä–µ—á–∏ –∏ —Å–Ω–∏–∂–µ–Ω–∏—è –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π:

#### –§–∏–ª—å—Ç—Ä—ã –ø–æ –¥–ª–∏–Ω–µ —Ñ—Ä–∞–∑—ã –∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ (STT)

- **`min_phrase_chars`** (–≤ –∫–æ–¥–µ) ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω–æ–π —Ñ—Ä–∞–∑—ã –≤ —Å–∏–º–≤–æ–ª–∞—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 5)
- **`min_avg_confidence`** (–≤ –∫–æ–¥–µ) ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—Ä–µ–¥–Ω—è—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –ø–æ —Å–ª–æ–≤–∞–º (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 0.6)
- –ö–æ—Ä–æ—Ç–∫–∏–µ —Ñ—Ä–∞–∑—ã –∏ —Ñ—Ä–∞–∑—ã —Å –Ω–∏–∑–∫–æ–π —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤—ã–≤–∞—é—Ç—Å—è

#### –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –ø–æ—Ä–æ–≥ –¥–ª—è hotword

Hotword –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π –ø–æ—Ä–æ–≥ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –ø–æ–¥ —É—Ä–æ–≤–µ–Ω—å —à—É–º–∞:
- –í —Ç–∏—Ö–æ–π –æ–±—Å—Ç–∞–Ω–æ–≤–∫–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å
- –í —à—É–º–Ω–æ–π –æ–±—Å—Ç–∞–Ω–æ–≤–∫–µ –ø–æ—Ä–æ–≥ –Ω–µ–º–Ω–æ–≥–æ —Å–Ω–∏–∂–∞–µ—Ç—Å—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `HOTWORD_ADAPTIVE_THRESHOLD` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `1` - –≤–∫–ª—é—á—ë–Ω)

#### –ö–∞–∫ –æ—Ü–µ–Ω–∏—Ç—å —Ç–æ—á–Ω–æ—Å—Ç—å –∞–∫—Ç–∏–≤–∞—Ü–∏–∏

–î–ª—è —Å–∏—Å—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—Ü–µ–Ω–∫–∏ —Ç–æ—á–Ω–æ—Å—Ç–∏ –¥–µ—Ç–µ–∫—Ü–∏–∏ hotword ¬´–ö–∏–º¬ª –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–∫—Ä–∏–ø—Ç `test_hotword_accuracy.py`:

1. **–ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –æ–±—Ä–∞–∑—Ü—ã:**
   
   **–í–∞—Ä–∏–∞–Ω—Ç –ê: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞)**
   ```bash
   python scripts/generate_hotword_test_samples.py
   ```
   –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç 10 —Ç–µ—Å—Ç–æ–≤—ã—Ö –∞—É–¥–∏–æ-—Ñ–∞–π–ª–æ–≤ (5 –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã—Ö, 5 –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö) —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º TTS.
   
   **–í–∞—Ä–∏–∞–Ω—Ç –ë: –†—É—á–Ω–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞**
   - –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏: `python scripts/prepare_hotword_test_samples.py`
   - –ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `test_samples/hotword/` –≤—Ä—É—á–Ω—É—é
   - –î–æ–±–∞–≤—å—Ç–µ –∞—É–¥–∏–æ-—Ñ–∞–π–ª—ã (`.wav`, `.mp3`, `.flac`, `.ogg`, `.m4a`):
     - –§–∞–π–ª—ã —Å `positive` –∏–ª–∏ `kim` –≤ –∏–º–µ–Ω–∏ ‚Äî –¥–æ–ª–∂–Ω—ã —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å hotword
     - –§–∞–π–ª—ã —Å `negative` –∏–ª–∏ `no_kim` –≤ –∏–º–µ–Ω–∏ ‚Äî –Ω–µ –¥–æ–ª–∂–Ω—ã —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å
   - –ü–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ —Å–º. –≤ `test_samples/hotword/README.md`

2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   ```bash
   python scripts/test_hotword_accuracy.py
   ```

3. **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–∫—Ä–∏–ø—Ç–∞:**
   - `--samples-dir` ‚Äî –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –æ–±—Ä–∞–∑—Ü–∞–º–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `test_samples/hotword`)
   - `--model-path` ‚Äî –ø—É—Ç—å –∫ –º–æ–¥–µ–ª–∏ Vosk (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: –∏–∑ `VOSK_MODEL_PATH` –∏–ª–∏ `models/vosk-ru`)
   - `--no-auto-tune` ‚Äî –æ—Ç–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ—Ç—é–Ω–∏–Ω–≥ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
   - `--min-confidence` ‚Äî –Ω–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ `min_hotword_confidence` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 0.5)
   - `--min-chars` ‚Äî –Ω–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ `min_chars_in_utterance` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 2)

4. **–ê–≤—Ç–æ—Ç—é–Ω–∏–Ω–≥:**
   –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è **Precision ‚â• 0.9 (90%)**:
   - –ï—Å–ª–∏ precision < 0.9, —É–º–µ–Ω—å—à–∞–µ—Ç `min_hotword_confidence` –Ω–∞ 0.02
   - –ï—Å–ª–∏ –º–Ω–æ–≥–æ –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π (FP > TP), —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç `min_chars_in_utterance`
   
   **–í–∞–∂–Ω–æ:** –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ "—Ç–æ—á–Ω–æ—Å—Ç—å 90%+" –æ–∑–Ω–∞—á–∞–µ—Ç **Precision ‚â• 0.9**, –∞ –Ω–µ Accuracy.
   - **Precision** ‚Äî –¥–æ–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π —Å—Ä–µ–¥–∏ –≤—Å–µ—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π (–≥–ª–∞–≤–Ω–∞—è –º–µ—Ç—Ä–∏–∫–∞)
   - **Recall** ‚Äî –¥–æ–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤ —Å—Ä–µ–¥–∏ –≤—Å–µ—Ö —Å–ª—É—á–∞–µ–≤ ¬´–ö–∏–º¬ª
   - **Accuracy** ‚Äî –æ–±—â–∞—è –¥–æ–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π
   
   –ü–æ–¥—Ä–æ–±–Ω–µ–µ —Å–º. `docs/hotword_accuracy_interpretation.md`

5. **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
   - –ú–µ—Ç—Ä–∏–∫–∏ –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å: Precision, Recall, F1-Score, Accuracy
   - –î–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `test_hotword_accuracy.log`
   - –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ –∫–æ–Ω—Ü–µ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ `.env`:
     ```env
     HOTWORD_MIN_CONFIDENCE=0.48
     HOTWORD_MIN_CHARS=3
     ```

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```bash
# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –∞–≤—Ç–æ—Ç—é–Ω–∏–Ω–≥–æ–º
python scripts/test_hotword_accuracy.py

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑ –∞–≤—Ç–æ—Ç—é–Ω–∏–Ω–≥–∞ —Å –∑–∞–¥–∞–Ω–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
python scripts/test_hotword_accuracy.py --no-auto-tune --min-confidence 0.6 --min-chars 3

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –¥—Ä—É–≥–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–µ–π –æ–±—Ä–∞–∑—Ü–æ–≤
python scripts/test_hotword_accuracy.py --samples-dir my_test_samples/hotword
```

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ hotword —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
```env
# –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –¥–ª—è —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è hotword (0.0-1.0)
HOTWORD_MIN_CONFIDENCE=0.5

# –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω–æ–π —Ñ—Ä–∞–∑—ã –≤ —Å–∏–º–≤–æ–ª–∞—Ö
HOTWORD_MIN_CHARS=2

# –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –ø–æ—Ä–æ–≥ (0 –∏–ª–∏ 1)
HOTWORD_ADAPTIVE_THRESHOLD=1
```

#### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å –º–∏–∫—Ä–æ—Ñ–æ–Ω–æ–º (–Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç hotword, –æ—à–∏–±–∫–∏ 247, –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ –±—É—Ñ–µ—Ä–∞), –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:

```bash
python scripts/diagnose_microphone.py
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç:**
1. **–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤** ‚Äî –≤—Å–µ –º–∏–∫—Ä–æ—Ñ–æ–Ω—ã –∏ –∏—Ö –∏–Ω–¥–µ–∫—Å—ã
2. **–¢–µ—Å—Ç–∏—Ä—É–µ—Ç –æ—Ç–∫—Ä—ã—Ç–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞** ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –º–∏–∫—Ä–æ—Ñ–æ–Ω –¥–æ—Å—Ç—É–ø–µ–Ω
3. **–ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç 3 —Å–µ–∫—É–Ω–¥—ã –∞—É–¥–∏–æ** ‚Äî –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —É—Ä–æ–≤–µ–Ω—å —Å–∏–≥–Ω–∞–ª–∞
4. **–û—Ü–µ–Ω–∏–≤–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ:**
   - –£—Ä–æ–≤–µ–Ω—å —à—É–º–∞
   - Clipping (–ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞)
   - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∏ —Å—Ä–µ–¥–Ω—è—è –∞–º–ø–ª–∏—Ç—É–¥–∞
5. **–í—ã–≤–æ–¥–∏—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
   - –ï—Å–ª–∏ –∞–º–ø–ª–∏—Ç—É–¥–∞ = 0 ‚Üí –º–∏–∫—Ä–æ—Ñ–æ–Ω –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–ª–∏ –¥—Ä–∞–π–≤–µ—Ä –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
   - –ï—Å–ª–∏ –∞–º–ø–ª–∏—Ç—É–¥–∞ > 30000 ‚Üí —Å–ª–∏—à–∫–æ–º –≥—Ä–æ–º–∫–æ, –Ω—É–∂–Ω–æ —Å–Ω–∏–∑–∏—Ç—å gain
   - –ï—Å–ª–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω clipping ‚Üí –Ω—É–∂–Ω–æ —Å–Ω–∏–∑–∏—Ç—å —É—Å–∏–ª–µ–Ω–∏–µ
   - –ï—Å–ª–∏ —Å–ª–∏—à–∫–æ–º —Ç–∏—Ö–æ ‚Üí –Ω—É–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å —É—Å–∏–ª–µ–Ω–∏–µ

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–∫—Ä–∏–ø—Ç–∞:**
```bash
# –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ (—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
python scripts/diagnose_microphone.py

# –£–∫–∞–∑–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
python scripts/diagnose_microphone.py --device-index 1

# –ò–∑–º–µ–Ω–∏—Ç—å –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–ø–∏—Å–∏
python scripts/diagnose_microphone.py --duration 5.0

# –¢–æ–ª—å–∫–æ –ø–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
python scripts/diagnose_microphone.py --list-only
```

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**
```
============================================================
–î–æ—Å—Ç—É–ø–Ω—ã–µ –∞—É–¥–∏–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
============================================================

–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –≤–≤–æ–¥–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: –∏–Ω–¥–µ–∫—Å 1

–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –≤–≤–æ–¥–∞ (–º–∏–∫—Ä–æ—Ñ–æ–Ω—ã):
------------------------------------------------------------
  [1] –ú–∏–∫—Ä–æ—Ñ–æ–Ω (Realtek Audio) (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
      –ß–∞—Å—Ç–æ—Ç—ã: 48000 Hz
      –ö–∞–Ω–∞–ª—ã: 2

============================================================
–¢–µ—Å—Ç –∑–∞–ø–∏—Å–∏ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞
============================================================

–ò—Å–ø–æ–ª—å–∑—É–µ–º–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ: [1] –ú–∏–∫—Ä–æ—Ñ–æ–Ω (Realtek Audio)
–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–ø–∏—Å–∏: 3.0 —Å–µ–∫—É–Ω–¥
–ß–∞—Å—Ç–æ—Ç–∞ –¥–∏—Å–∫—Ä–µ—Ç–∏–∑–∞—Ü–∏–∏: 16000 Hz

üé§ –ì–æ–≤–æ—Ä–∏—Ç–µ –≤ –º–∏–∫—Ä–æ—Ñ–æ–Ω...

============================================================
–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞
============================================================

–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ: –ú–∏–∫—Ä–æ—Ñ–æ–Ω (Realtek Audio)
–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∞–º–ø–ª–∏—Ç—É–¥–∞: 0.5234 (17156 –≤ int16)
–°—Ä–µ–¥–Ω—è—è –∞–º–ø–ª–∏—Ç—É–¥–∞: 0.1234
RMS (—Å—Ä–µ–¥–Ω–µ–∫–≤–∞–¥—Ä–∞—Ç–∏—á–Ω–æ–µ): 0.1456
–£—Ä–æ–≤–µ–Ω—å —à—É–º–∞: 0.0023
Clipping (–ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞): 0 —Å—ç–º–ø–ª–æ–≤ (0.00%)

============================================================
–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
============================================================

1. ‚úÖ –û–¢–õ–ò–ß–ù–û: –ú–∏–∫—Ä–æ—Ñ–æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ
   –†–µ—à–µ–Ω–∏—è:
   ‚Ä¢ –£—Ä–æ–≤–µ–Ω—å —Å–∏–≥–Ω–∞–ª–∞ –≤ –Ω–æ—Ä–º–µ
   ‚Ä¢ Clipping –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω
   ‚Ä¢ –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–º
```

**–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–µ:**

–ü—Ä–∏ —Ä–∞–±–æ—Ç–µ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –æ—à–∏–±–∫–∏:
- **–û—à–∏–±–∫–∞ 247 (–±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è)** ‚Äî –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –≤—ã–≤–æ–¥–∏—Ç —Å–æ–≤–µ—Ç —á–µ—Ä–µ–∑ TTS –∏ –ª–æ–≥–∏
- **–ü–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ –±—É—Ñ–µ—Ä–∞ (overflow)** ‚Äî –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –≤—ã–≤–æ–¥–∏—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

–í—Å–µ –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∏–º–µ–Ω–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏.

#### –ú—è–≥–∫–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ñ—Ä–∞–∑—ã

–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω–æ–π —Ñ—Ä–∞–∑—ã –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ —Å–ª–µ–¥—É—é—â–∏—Ö —Å–ª—É—á–∞—è—Ö:
- –ù–∏–∑–∫–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è (< 0.75)
- –î–ª–∏–Ω–Ω–∞—è —Ñ—Ä–∞–∑–∞ (‚â• 25 —Å–∏–º–≤–æ–ª–æ–≤)

–î–ª—è –∫–æ—Ä–æ—Ç–∫–∏—Ö —Ñ—Ä–∞–∑ —Å –≤—ã—Å–æ–∫–æ–π —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è ‚Äî –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç —Å—Ä–∞–∑—É –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å.

#### WebRTC VAD (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–î–ª—è —É–ª—É—á—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –º–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å WebRTC VAD (Voice Activity Detection), –∫–æ—Ç–æ—Ä—ã–π –æ—Ç—Å–µ–∫–∞–µ—Ç —Ñ–æ–Ω–æ–≤—ã–π —à—É–º:

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±–∏–±–ª–∏–æ—Ç–µ–∫—É:**
   ```bash
   pip install webrtcvad
   ```

2. **–í–∫–ª—é—á–∏—Ç–µ –≤ `.env`:**
   ```env
   STT_USE_VAD=1
   STT_VAD_AGGRESSIVENESS=2
   ```
   - `STT_USE_VAD` ‚Äî –≤–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å VAD (`0` –∏–ª–∏ `1`, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `0`)
   - `STT_VAD_AGGRESSIVENESS` ‚Äî –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ—Å—Ç—å (0-3, –≥–¥–µ 3 ‚Äî —Å–∞–º–∞—è –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `2`)

**–í–∞–∂–Ω–æ:** VAD —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —á–∞—Å—Ç–æ—Ç–µ –¥–∏—Å–∫—Ä–µ—Ç–∏–∑–∞—Ü–∏–∏ 8, 16 –∏–ª–∏ 32 –∫–ì—Ü. –ü—Ä–æ–µ–∫—Ç –Ω–µ —Å–ª–æ–º–∞–µ—Ç—Å—è, –µ—Å–ª–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ `webrtcvad` –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ ‚Äî VAD –ø—Ä–æ—Å—Ç–æ –Ω–µ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è.

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞

–í—ã –º–æ–∂–µ—Ç–µ —è–≤–Ω–æ —É–∫–∞–∑–∞—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –≤–≤–æ–¥–∞ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞:

```env
MIC_DEVICE_INDEX=
MIC_SAMPLE_RATE=16000
MIC_CHUNK_SIZE=4000
```

- **`MIC_DEVICE_INDEX`** ‚Äî –∏–Ω–¥–µ–∫—Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –≤–≤–æ–¥–∞ (–º–∏–∫—Ä–æ—Ñ–æ–Ω). –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- **`MIC_SAMPLE_RATE`** ‚Äî —á–∞—Å—Ç–æ—Ç–∞ –¥–∏—Å–∫—Ä–µ—Ç–∏–∑–∞—Ü–∏–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `16000` –ì—Ü)
- **`MIC_CHUNK_SIZE`** ‚Äî —Ä–∞–∑–º–µ—Ä –±–ª–æ–∫–∞ –∞—É–¥–∏–æ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `4000` —Å—ç–º–ø–ª–æ–≤)

**–ö–∞–∫ —É–∑–Ω–∞—Ç—å –∏–Ω–¥–µ–∫—Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞:**
```python
import sounddevice as sd
print(sd.query_devices())
```

### –ü–æ–≤–µ–¥–µ–Ω–∏–µ

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç:
- –ù–∞—á–∏–Ω–∞–µ—Ç –ø—Ä–æ—Å–ª—É—à–∏–≤–∞—Ç—å –º–∏–∫—Ä–æ—Ñ–æ–Ω –¥–ª—è –ø–æ–∏—Å–∫–∞ –∫–ª—é—á–µ–≤–æ–≥–æ —Å–ª–æ–≤–∞ ¬´–ö–∏–º¬ª
- –ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ —Å–ª–æ–≤–∞ ¬´–ö–∏–º¬ª:
  - –û—Ç–≤–µ—á–∞–µ—Ç –≥–æ–ª–æ—Å–æ–º: ¬´–î–∞, —Å–ª—É—à–∞—é.¬ª
  - –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Ä–µ–∂–∏–º –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è –≤–æ–ø—Ä–æ—Å–∞
  - –ü—Ä–∏ –Ω–µ—É–¥–∞—á–Ω–æ–º —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–∏ –¥–µ–ª–∞–µ—Ç –¥–æ 2 –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫
  - –ü–æ—Å–ª–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç —Ñ—Ä–∞–∑—É –≥–æ–ª–æ—Å–æ–º –∏ —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç, –≤–µ—Ä–Ω–æ –ª–∏ –æ–Ω–∞ –ø–æ–Ω—è–ª–∞
  - –ü—Ä–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤–æ–ø—Ä–æ—Å –≤ LLM (–µ—Å–ª–∏ –Ω–µ –≤–∫–ª—é—á—ë–Ω —Ä–µ–∂–∏–º `LOCAL_ONLY`)
  - –û–∑–≤—É—á–∏–≤–∞–µ—Ç –æ—Ç–≤–µ—Ç –æ—Ç LLM –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–Ω—Ç–∏–¥—Ä–µ–±–µ–∑–≥ (–Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —á–∞—â–µ —Ä–∞–∑–∞ –≤ 1.2 —Å–µ–∫—É–Ω–¥—ã)

–î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞–∂–º–∏—Ç–µ `Ctrl+C`.

### –£–ª—É—á—à–µ–Ω–∏—è UX

#### –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã

–ö–∏–º –ø–æ–≤—Ç–æ—Ä—è–µ—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—É—é —Ñ—Ä–∞–∑—É –∏ —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç, –≤–µ—Ä–Ω–æ –ª–∏ –æ–Ω–∞ –ø–æ–Ω—è–ª–∞. –≠—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç:
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∫–æ–º–∞–Ω–¥–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫—É —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è, –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫

**–ü—Ä–∏–º–µ—Ä:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ¬´–ö–∞–∫–æ–π —Å–µ–≥–æ–¥–Ω—è –¥–µ–Ω—å?¬ª
- –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç: ¬´–í—ã —Å–∫–∞–∑–∞–ª–∏: –ö–∞–∫–æ–π —Å–µ–≥–æ–¥–Ω—è –¥–µ–Ω—å? –í–µ—Ä–Ω–æ?¬ª
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ¬´–î–∞¬ª ‚Üí –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ¬´–ù–µ—Ç¬ª ‚Üí –ø—Ä–æ—Å–∏—Ç –ø–æ–≤—Ç–æ—Ä–∏—Ç—å

#### –ü–æ–≤—Ç–æ—Ä—ã

–ü—Ä–∏ –ø–ª–æ—Ö–æ–º —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–∏ —Ä–µ—á–∏ (—Ç–∏—à–∏–Ω–∞, –Ω–µ—Ä–∞–∑–±–æ—Ä—á–∏–≤–æ) –ö–∏–º –¥–µ–ª–∞–µ—Ç –¥–æ 2 –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å —Ñ—Ä–∞–∑—É. –≠—Ç–æ –ø–æ–≤—ã—à–∞–µ—Ç –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã –≤ —à—É–º–Ω–æ–π –æ–±—Å—Ç–∞–Ω–æ–≤–∫–µ.

**–ü—Ä–∏–º–µ—Ä:**
- –ü–æ–ø—ã—Ç–∫–∞ 1: –Ω–∏—á–µ–≥–æ –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–æ
- –ü–æ–ø—ã—Ç–∫–∞ 2: –Ω–∏—á–µ–≥–æ –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–æ
- –ü–æ–ø—ã—Ç–∫–∞ 3: —Ñ—Ä–∞–∑–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–∞ —É—Å–ø–µ—à–Ω–æ

–ï—Å–ª–∏ –≤—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –Ω–µ—É–¥–∞—á–Ω—ã, –ö–∏–º —Å–æ–æ–±—â–∞–µ—Ç: ¬´–ù–µ —Ä–∞—Å—Å–ª—ã—à–∞–ª–∞, –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–æ–∑–∂–µ.¬ª

#### –†–µ–∂–∏–º —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω–æ

–ï—Å–ª–∏ –≤ `.env` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ `LOCAL_ONLY=1`, –ö–∏–º —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ LLM –∏ –¥–∞—ë—Ç —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã:

- –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ: ¬´–ü—Ä–∏–≤–µ—Ç! –°–µ–π—á–∞—Å —è —Ä–∞–±–æ—Ç–∞—é –≤ –ª–æ–∫–∞–ª—å–Ω–æ–º —Ä–µ–∂–∏–º–µ –∏ –Ω–µ –æ–±—Ä–∞—â–∞—é—Å—å –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É.¬ª
- –ó–∞–ø—Ä–æ—Å –≤—Ä–µ–º–µ–Ω–∏: —Å–æ–æ–±—â–∞–µ—Ç —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è (–µ—Å–ª–∏ –≤ —Ñ—Ä–∞–∑–µ –µ—Å—Ç—å —Å–ª–æ–≤–∞ ¬´–≤—Ä–µ–º—è¬ª, ¬´–∫–æ—Ç–æ—Ä—ã–π —á–∞—Å¬ª)
- –û—Å—Ç–∞–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã: ¬´–°–µ–π—á–∞—Å –≤–∫–ª—é—á—ë–Ω —Ä–µ–∂–∏–º —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω–æ, —è –Ω–µ –æ–±—Ä–∞—â–∞—é—Å—å –∫ –ò–ò-–º–æ–¥–µ–ª–∏.¬ª

–≠—Ç–æ—Ç —Ä–µ–∂–∏–º –ø–æ–ª–µ–∑–µ–Ω –¥–ª—è:
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –±–µ–∑ –∑–∞—Ç—Ä–∞—Ç –Ω–∞ API
- –†–∞–±–æ—Ç—ã –≤ —É—Å–ª–æ–≤–∏—è—Ö –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
- –ü–æ–≤—ã—à–µ–Ω–∏—è –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏ (–¥–∞–Ω–Ω—ã–µ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ –æ–±–ª–∞–∫–æ)

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ TTS

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≥–æ–ª–æ—Å–∞ –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ –∫–æ–¥–µ `src/kim_voice/tts/voice.py`:
- –°–∫–æ—Ä–æ—Å—Ç—å —Ä–µ—á–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 170 —Å–ª–æ–≤/–º–∏–Ω—É—Ç—É)
- –ì—Ä–æ–º–∫–æ—Å—Ç—å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 1.0)
- –í—ã–±–æ—Ä –∂–µ–Ω—Å–∫–æ–≥–æ –≥–æ–ª–æ—Å–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ä–µ—á–∏ –∏ —Å–Ω–∏–∂–µ–Ω–∏—è –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π hotword.

**–í–∞–∂–Ω–æ:** Hotword –∏ STT ‚Äî —ç—Ç–æ —Ä–∞–∑–Ω—ã–µ —ç—Ç–∞–ø—ã —Ä–∞–±–æ—Ç—ã –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞:

- **Hotword (–¥–µ—Ç–µ–∫—Ü–∏—è ¬´–ö–∏–º¬ª)** ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ, –∏—â–µ—Ç –∫–æ—Ä–æ—Ç–∫–æ–µ —Å–ª–æ–≤–æ "–ö–∏–º" (3 —Å–∏–º–≤–æ–ª–∞) –∏ –∏–º–µ–µ—Ç —Å–≤–æ–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ (`min_chars_in_utterance = 3`)
- **STT (—Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–∞)** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ü–û–°–õ–ï –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ hotword –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –ø–æ–ª–Ω–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–æ–±—ã—á–Ω–æ –¥–ª–∏–Ω–Ω–µ–µ 5 —Å–∏–º–≤–æ–ª–æ–≤)
- **STT (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ)** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∫–æ—Ä–æ—Ç–∫–∏—Ö –æ—Ç–≤–µ—Ç–æ–≤ "–¥–∞"/"–Ω–µ—Ç" –∏ –∏–º–µ–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –º—è–≥–∫–∏–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏

–ü–æ—ç—Ç–æ–º—É –ø–∞—Ä–∞–º–µ—Ç—Ä `min_phrase_chars = 5` –¥–ª—è STT –Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É–µ—Ç —Å hotword "–ö–∏–º" (3 —Å–∏–º–≤–æ–ª–∞) ‚Äî —ç—Ç–æ —Ä–∞–∑–Ω—ã–µ —ç—Ç–∞–ø—ã —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã.

#### STT (–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏)

–î–ª—è —É–ª—É—á—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ —Ñ–∏–ª—å—Ç—Ä—ã:

- **–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ —Ñ—Ä–∞–∑—ã** (`min_phrase_chars = 5`) ‚Äî —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–µ —Ñ—Ä–∞–∑—ã (–º–µ–Ω–µ–µ 5 —Å–∏–º–≤–æ–ª–æ–≤) –æ—Ç–∫–ª–æ–Ω—è—é—Ç—Å—è –∫–∞–∫ –Ω–µ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ. –≠—Ç–æ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
- **–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—Ä–µ–¥–Ω—è—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å** (`min_avg_confidence = 0.6`) ‚Äî —Ñ—Ä–∞–∑—ã —Å –Ω–∏–∑–∫–æ–π —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è (—Å—Ä–µ–¥–Ω—è—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –ø–æ —Å–ª–æ–≤–∞–º < 0.6) –æ—Ç–∫–ª–æ–Ω—è—é—Ç—Å—è

**–î–ª—è –∫–æ—Ä–æ—Ç–∫–∏—Ö –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π** ("–¥–∞"/"–Ω–µ—Ç") –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ `listen_once_for_confirmation()` —Å –±–æ–ª–µ–µ –º—è–≥–∫–∏–º–∏ –∫—Ä–∏—Ç–µ—Ä–∏—è–º–∏:
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞: 2 —Å–∏–º–≤–æ–ª–∞ (–ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è "–¥–∞", "–Ω–µ—Ç")
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: 0.5 (–Ω–∏–∂–µ, —á–µ–º –¥–ª—è –æ–±—ã—á–Ω—ã—Ö —Ñ—Ä–∞–∑)
- –ë–æ–ª–µ–µ –∫–æ—Ä–æ—Ç–∫–∏–π —Ç–∞–π–º–∞—É—Ç —Ç–∏—à–∏–Ω—ã: 1 —Å–µ–∫—É–Ω–¥–∞ (–≤–º–µ—Å—Ç–æ 1.5)

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞—Ç—å –∫–æ—Ä–æ—Ç–∫–∏–µ –æ—Ç–≤–µ—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

–≠—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤ `STTConfig` –≤ —Ñ–∞–π–ª–µ `src/kim_voice/stt/speech_to_text.py`:

```python
@dataclass
class STTConfig:
    min_phrase_chars: int = 5  # –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ —Ñ—Ä–∞–∑—ã –≤ —Å–∏–º–≤–æ–ª–∞—Ö
    min_avg_confidence: float = 0.6  # –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—Ä–µ–¥–Ω—è—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å
    debug_log_words: bool = False  # –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ª–æ–≤ —Å —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é
```

–ï—Å–ª–∏ –≤ –≤–∞—à–µ–π —Å—Ä–µ–¥–µ –º–Ω–æ–≥–æ —à—É–º–∞, –º–æ–∂–Ω–æ:
- –£–≤–µ–ª–∏—á–∏—Ç—å `min_avg_confidence` (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–æ `0.7` –∏–ª–∏ `0.8`) –¥–ª—è –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- –£–≤–µ–ª–∏—á–∏—Ç—å `min_phrase_chars` (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–æ `7`), —á—Ç–æ–±—ã –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—á–µ–Ω—å –∫–æ—Ä–æ—Ç–∫–∏–µ —Ñ—Ä–∞–∑—ã

#### Hotword (–ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ ¬´–ö–∏–º¬ª)

–î–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π hotword –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è:

- **–°—Ç—Ä–æ–≥–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å–ª–æ–≤–∞** (`require_strict_word_match = True`) ‚Äî hotword —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–∞–π–¥–µ–Ω–æ –æ—Ç–¥–µ–ª—å–Ω–æ–µ —Å–ª–æ–≤–æ "–∫–∏–º", –∞ –Ω–µ –ø–æ–¥—Å—Ç—Ä–æ–∫–∞
- **–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ —Ñ—Ä–∞–∑—ã** (`min_chars_in_utterance = 3`) ‚Äî —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–µ —Ñ—Ä–∞–∑—ã –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è
- **–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—Ä–µ–¥–Ω—è—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å** (`min_hotword_confidence = 0.7`) ‚Äî –Ω–∏–∑–∫–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏—é

–≠—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤ `HotwordConfig` –≤ —Ñ–∞–π–ª–µ `src/kim_voice/hotword/kim_hotword.py`:

```python
@dataclass
class HotwordConfig:
    min_hotword_confidence: float = 0.7  # –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—Ä–µ–¥–Ω—è—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å
    require_strict_word_match: bool = True  # —Å—Ç—Ä–æ–≥–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å–ª–æ–≤–∞
    min_chars_in_utterance: int = 3  # –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ —Ñ—Ä–∞–∑—ã
```

–ï—Å–ª–∏ hotword —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç–æ:
- –£–≤–µ–ª–∏—á—å—Ç–µ `min_hotword_confidence` (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–æ `0.8` –∏–ª–∏ `0.85`)
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `require_strict_word_match = True` –≤–∫–ª—é—á–µ–Ω–æ

–ï—Å–ª–∏ hotword –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç:
- –ù–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —Å–Ω–∏–∑—å—Ç–µ `min_hotword_confidence` (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–æ `0.65`)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –º–∏–∫—Ä–æ—Ñ–æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### –û—Ç–ª–∞–¥–∫–∞

–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç—ã:
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –º–æ–¥–µ–ª—å Vosk –∑–∞–≥—Ä—É–∂–µ–Ω–∞ (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –º–∏–∫—Ä–æ—Ñ–æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç (Windows ‚Üí –ü–∞—Ä–∞–º–µ—Ç—Ä—ã ‚Üí –°–∏—Å—Ç–µ–º–∞ ‚Üí –ó–≤—É–∫)
3. –í –ª–æ–≥–∞—Ö –±—É–¥—É—Ç –≤–∏–¥–Ω—ã –≤—Å–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã–µ —Ñ—Ä–∞–∑—ã –∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è hotword

## –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ü–ö –∏ –æ–ø–æ–≤–µ—â–µ–Ω–∏—è

–ê—Å—Å–∏—Å—Ç–µ–Ω—Ç ¬´–ö–∏–º¬ª –º–æ–∂–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ –∏ —É–≤–µ–¥–æ–º–ª—è—Ç—å –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å —Ä–µ—Å—É—Ä—Å–∞–º–∏ —Å–∏—Å—Ç–µ–º—ã.

### –°–æ–±–∏—Ä–∞–µ–º—ã–µ –º–µ—Ç—Ä–∏–∫–∏

–°–µ—Ä–≤–∏—Å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ —Å–æ–±–∏—Ä–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏:

- **CPU (–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä)** ‚Äî –ø—Ä–æ—Ü–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞
- **RAM (–ø–∞–º—è—Ç—å)** ‚Äî –ø—Ä–æ—Ü–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏
- **–î–∏—Å–∫** ‚Äî –ø—Ä–æ—Ü–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞
- **–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞** ‚Äî —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–∞ –Ω–∞ –≤–∞—à–µ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ)

### –ü–æ—Ä–æ–≥–∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –ø—Ä–∏:

- –ó–∞–≥—Ä—É–∑–∫–∞ CPU ‚â• 85%
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ RAM ‚â• 90%
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–∞ ‚â• 90%
- –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ ‚Äî –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–µ –∑–∞–¥–∞–Ω–∞)

–í—ã –º–æ–∂–µ—Ç–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ—Ä–æ–≥–∏ –≤ —Ñ–∞–π–ª–µ `.env`:

```env
CPU_WARN=85
RAM_WARN=90
DISK_WARN=90
TEMP_WARN=80
```

–ï—Å–ª–∏ –ø–æ—Ä–æ–≥ –Ω–µ –∑–∞–¥–∞–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, `TEMP_WARN=`), –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –ø–æ —ç—Ç–æ–π –º–µ—Ç—Ä–∏–∫–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å—Å—è –Ω–µ –±—É–¥—É—Ç.

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ Telegram –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å:

1. **`ALERTS_CHAT_ID`** ‚Äî ID –≤–∞—à–µ–≥–æ —á–∞—Ç–∞/–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Telegram

   **–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± –ø–æ–ª—É—á–∏—Ç—å ID:**
   
   - –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ (–µ—Å–ª–∏ –µ—â—ë –Ω–µ –∑–∞–ø—É—â–µ–Ω): `python run_bot.py`
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É –∫–æ–º–∞–Ω–¥—É: ` /myid`
   - –ë–æ—Ç –≤–µ—Ä–Ω—ë—Ç –≤–∞—à Chat ID (–Ω–∞–ø—Ä–∏–º–µ—Ä, `123456789`)
   - –î–æ–±–∞–≤—å—Ç–µ —ç—Ç–æ—Ç ID –≤ —Ñ–∞–π–ª `.env`:
     ```env
     ALERTS_CHAT_ID=123456789
     ```

   **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã:**
   
   - –ß–µ—Ä–µ–∑ –±–æ—Ç–∞ [@userinfobot](https://t.me/userinfobot): –Ω–∞–ø–∏—à–∏—Ç–µ `/start`, –±–æ—Ç –≤–µ—Ä–Ω—ë—Ç –≤–∞—à ID
   - –ß–µ—Ä–µ–∑ –±–æ—Ç–∞ [@RawDataBot](https://t.me/RawDataBot): –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –±–æ—Ç –≤–µ—Ä–Ω—ë—Ç JSON —Å ID
   - –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç: –∑–∞–ø—É—Å—Ç–∏—Ç–µ `python scripts/get_chat_id.py` –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π

2. **`BOT_TOKEN`** ‚Äî —Ç–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ Telegram-–±–æ—Ç–∞ (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–∂–µ —É–∫–∞–∑–∞–Ω)

3. **`DIAGNOSTICS_INTERVAL_SECONDS`** ‚Äî –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 60)

```env
ALERTS_CHAT_ID=123456789
DIAGNOSTICS_INTERVAL_SECONDS=60
```

### –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

#### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ Makefile

```bash
make diag
```

#### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞

```bash
python -m scripts.run_diagnostics_service
```

#### –í–∞—Ä–∏–∞–Ω—Ç 3: –ü—Ä—è–º–æ–π –∑–∞–ø—É—Å–∫ –º–æ–¥—É–ª—è

```bash
python -m src.kim_scheduler.diagnostics_watcher
```

### –ü–æ–≤–µ–¥–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å:

1. **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –º–µ—Ç—Ä–∏–∫–∏** –∫–∞–∂–¥—ã–µ N —Å–µ–∫—É–Ω–¥ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 60)
2. **–°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç** –∑–Ω–∞—á–µ–Ω–∏—è —Å –ø–æ—Ä–æ–≥–∞–º–∏
3. **–ü—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ø–æ—Ä–æ–≥–æ–≤:**
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram —Å –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç—è–º–∏ –ø—Ä–æ–±–ª–µ–º
   - –ï—Å–ª–∏ –≥–æ–ª–æ—Å–æ–≤–æ–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –∑–∞–ø—É—â–µ–Ω –ª–æ–∫–∞–ª—å–Ω–æ (Windows), –ø—Ä–æ–∏–∑–Ω–æ—Å–∏—Ç –≥–æ–ª–æ—Å–æ–≤–æ–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ: *"–í–Ω–∏–º–∞–Ω–∏–µ, –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å —Ä–µ—Å—É—Ä—Å–∞–º–∏ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞. –Ø –æ—Ç–ø—Ä–∞–≤–∏–ª–∞ –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –≤ Telegram."*

**–ü—Ä–∏–º–µ—Ä —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram:**

```
‚ö†Ô∏è –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ü–ö: –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã:

‚Ä¢ –í—ã—Å–æ–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ CPU: 92.5% (–ø–æ—Ä–æ–≥: 85%)
‚Ä¢ –ú–∞–ª–æ —Å–≤–æ–±–æ–¥–Ω–æ–π –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏: 95.2% –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (–ø–æ—Ä–æ–≥: 90%)
```

### –ì–æ–ª–æ—Å–æ–≤—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

–ì–æ–ª–æ—Å–æ–≤—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –µ—Å–ª–∏:

- –°–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω –Ω–∞ Windows
- –ú–æ–¥—É–ª—å `kim_voice` –¥–æ—Å—Ç—É–ø–µ–Ω
- –°–∏–Ω—Ç–µ–∑–∞—Ç–æ—Ä —Ä–µ—á–∏ (TTS) –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —É—Å–ø–µ—à–Ω–æ

–ï—Å–ª–∏ –≥–æ–ª–æ—Å–æ–≤—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã, —Å–µ—Ä–≤–∏—Å –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Ä–∞–±–æ—Ç—É –∏ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ç–æ–ª—å–∫–æ Telegram-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã

–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –∑–∞–≤–∏—Å–∏—Ç –æ—Ç:

- **–ü–ª–∞—Ç—Ñ–æ—Ä–º—ã** (Windows/Linux/macOS)
- **–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ–Ω—Å–æ—Ä–æ–≤** –≤ —Å–∏—Å—Ç–µ–º–µ
- **–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ psutil**

–ï—Å–ª–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞, —Å–µ—Ä–≤–∏—Å –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Ä–∞–±–æ—Ç—É, —Å–æ–±–∏—Ä–∞—è –æ—Å—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏.

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–∞

–î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–µ—Ä–≤–∏—Å–∞ –Ω–∞–∂–º–∏—Ç–µ `Ctrl+C`. –°–µ—Ä–≤–∏—Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç —Ä–∞–±–æ—Ç—É –∏ –∑–∞–∫—Ä–æ–µ—Ç –≤—Å–µ —Ä–µ—Å—É—Ä—Å—ã.

## –ö–∞–ª–µ–Ω–¥–∞—Ä—å –∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è (Stage 2)

–ê—Å—Å–∏—Å—Ç–µ–Ω—Ç ¬´–ö–∏–º¬ª –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–º–∏ —á–µ—Ä–µ–∑ Telegram-–±–æ—Ç–∞.

### –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

–°–æ–±—ã—Ç–∏—è –∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è —Ö—Ä–∞–Ω—è—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ SQLite-–±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ø–æ –ø—É—Ç–∏ `data/calendar.db`. –ü—É—Ç—å –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `REMINDERS_DB_PATH` –≤ —Ñ–∞–π–ª–µ `.env`.

–ü–∞–ø–∫–∞ `data/` —Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ, –µ—Å–ª–∏ –µ—ë –Ω–µ—Ç.

### –ö–æ–º–∞–Ω–¥—ã Telegram-–±–æ—Ç–∞

#### –°–æ–∑–¥–∞–Ω–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è: `/remind`

–°–æ–∑–¥–∞—ë—Ç –Ω–æ–≤–æ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º –∏ —Ç–µ–∫—Å—Ç–æ–º.

**–§–æ—Ä–º–∞—Ç –∫–æ–º–∞–Ω–¥—ã:**
```
/remind YYYY-MM-DD HH:MM –¢–µ–∫—Å—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è [–º–∏–Ω—É—Ç_–¥–æ]
```

**–ü—Ä–∏–º–µ—Ä—ã:**
- `/remind 2025-12-10 15:00 —Å–æ–∑–≤–æ–Ω —Å –∫–ª–∏–µ–Ω—Ç–æ–º 30` ‚Äî —Å–æ–∑–¥–∞—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –Ω–∞ 10 –¥–µ–∫–∞–±—Ä—è 2025 –≤ 15:00, –Ω–∞–ø–æ–º–Ω–∏—Ç—å –∑–∞ 30 –º–∏–Ω—É—Ç –¥–æ —Å–æ–±—ã—Ç–∏—è
- `/remind 2025-12-10 09:00 –≤—ã–≥—É–ª—è—Ç—å —Å–æ–±–∞–∫—É` ‚Äî —Å–æ–∑–¥–∞—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –Ω–∞ 10 –¥–µ–∫–∞–±—Ä—è 2025 –≤ 09:00, –Ω–∞–ø–æ–º–Ω–∏—Ç—å –∑–∞ 10 –º–∏–Ω—É—Ç –¥–æ —Å–æ–±—ã—Ç–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `YYYY-MM-DD HH:MM` ‚Äî –¥–∞—Ç–∞ –∏ –≤—Ä–µ–º—è —Å–æ–±—ã—Ç–∏—è (–≤ —Ñ–æ—Ä–º–∞—Ç–µ UTC)
- `–¢–µ–∫—Å—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è` ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è
- `–º–∏–Ω—É—Ç_–¥–æ` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ‚Äî –∑–∞ —Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç –¥–æ —Å–æ–±—ã—Ç–∏—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 10 –º–∏–Ω—É—Ç)

‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –í—Ä–µ–º—è —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ UTC. –£—á–∏—Ç—ã–≤–∞–π—Ç–µ —Ä–∞–∑–Ω–∏—Ü—É —Å –≤–∞—à–∏–º —á–∞—Å–æ–≤—ã–º –ø–æ—è—Å–æ–º.

#### –ü—Ä–æ—Å–º–æ—Ç—Ä –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π: `/reminders`

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –≤–∞—à–∏—Ö –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π (—Ç–æ–ª—å–∫–æ –±—É–¥—É—â–∏–µ —Å–æ–±—ã—Ç–∏—è).

**–§–æ—Ä–º–∞—Ç –∫–æ–º–∞–Ω–¥—ã:**
```
/reminders
```

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**
```
üìã –í–∞—à–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è:

`1` | 2025-12-10 09:00 UTC | –≤—ã–≥—É–ª—è—Ç—å —Å–æ–±–∞–∫—É (–∑–∞ 10 –º–∏–Ω –¥–æ)
`2` | 2025-12-10 15:00 UTC | —Å–æ–∑–≤–æ–Ω —Å –∫–ª–∏–µ–Ω—Ç–æ–º (–∑–∞ 30 –º–∏–Ω –¥–æ)
```

#### –£–¥–∞–ª–µ–Ω–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è: `/remind_delete`

–£–¥–∞–ª—è–µ—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –ø–æ –µ–≥–æ ID.

**–§–æ—Ä–º–∞—Ç –∫–æ–º–∞–Ω–¥—ã:**
```
/remind_delete <id>
```

**–ü—Ä–∏–º–µ—Ä:**
```
/remind_delete 1
```

ID –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤ —Å–ø–∏—Å–∫–µ –∫–æ–º–∞–Ω–¥–æ–π `/reminders`.

### –§–æ–Ω–æ–≤—ã–π –≤–æ—Ä–∫–µ—Ä –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π

–î–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –Ω–µ–æ–±—Ö–æ–¥–∏–º –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–æ–Ω–æ–≤—ã–π –≤–æ—Ä–∫–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ–±—ã—Ç–∏—è –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.

#### –ó–∞–ø—É—Å–∫ –≤–æ—Ä–∫–µ—Ä–∞

##### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü—Ä—è–º–æ–π –∑–∞–ø—É—Å–∫ –º–æ–¥—É–ª—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
python -m src.kim_scheduler.reminders.worker
```

##### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç

–°–æ–∑–¥–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç `scripts/run_reminders_worker.py` –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π —Å–ø–æ—Å–æ–± –∑–∞–ø—É—Å–∫–∞.

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–æ—Ä–∫–µ—Ä–∞

–í —Ñ–∞–π–ª–µ `.env` –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

```env
# –ü—É—Ç—å –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –∫–∞–ª–µ–Ω–¥–∞—Ä—è
REMINDERS_DB_PATH=data/calendar.db

# –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –≤ —Å–µ–∫—É–Ω–¥–∞—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 60)
REMINDERS_INTERVAL_SECONDS=60

# –¢–æ–∫–µ–Ω –±–æ—Ç–∞ (–æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤–æ—Ä–∫–µ—Ä–∞)
# –í–ê–ñ–ù–û: –°–µ–∫—Ä–µ—Ç—ã (BOT_TOKEN, OPENROUTER_API_KEY) —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ keyring, –∞ –Ω–µ –∑–¥–µ—Å—å!
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ: python scripts/set_secrets.py
```

#### –ü–æ–≤–µ–¥–µ–Ω–∏–µ –≤–æ—Ä–∫–µ—Ä–∞

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –≤–æ—Ä–∫–µ—Ä:

1. **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ–±—ã—Ç–∏—è** –∫–∞–∂–¥—ã–µ N —Å–µ–∫—É–Ω–¥ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 60)
2. **–ù–∞—Ö–æ–¥–∏—Ç —Å–æ–±—ã—Ç–∏—è**, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –ø–æ—Ä–∞ –Ω–∞–ø–æ–º–Ω–∏—Ç—å:
   - –°–æ–±—ã—Ç–∏–µ –µ—â—ë –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ (`is_fired = False`)
   - –¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∏–Ω—Ç–µ—Ä–≤–∞–ª–µ: `(datetime_utc - remind_before_minutes) <= now <= datetime_utc`
3. **–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**:
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ Telegram –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤ –ª–∏—á–Ω—ã–π —á–∞—Ç
   - –ü–æ–º–µ—á–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–µ (`is_fired = True`)
   - –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –æ–∑–≤—É—á–∏–≤–∞–µ—Ç –≥–æ–ª–æ—Å–æ–≤–æ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω TTS –∏ –≤–æ—Ä–∫–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ –º–∞—à–∏–Ω–µ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞)

**–ü—Ä–∏–º–µ—Ä —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram:**
```
‚è∞ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ: —Å–æ–∑–≤–æ–Ω —Å –∫–ª–∏–µ–Ω—Ç–æ–º
üìÖ –í—Ä–µ–º—è: 2025-12-10 15:00 UTC
```

#### –ì–æ–ª–æ—Å–æ–≤—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

–ì–æ–ª–æ—Å–æ–≤—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –µ—Å–ª–∏:
- –í–æ—Ä–∫–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ Windows
- –ú–æ–¥—É–ª—å `kim_voice` –¥–æ—Å—Ç—É–ø–µ–Ω
- –°–∏–Ω—Ç–µ–∑–∞—Ç–æ—Ä —Ä–µ—á–∏ (TTS) –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —É—Å–ø–µ—à–Ω–æ

–ï—Å–ª–∏ –≥–æ–ª–æ—Å–æ–≤—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã, –≤–æ—Ä–∫–µ—Ä –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Ä–∞–±–æ—Ç—É –∏ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ç–æ–ª—å–∫–æ Telegram-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.

#### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤–æ—Ä–∫–µ—Ä–∞

–î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤–æ—Ä–∫–µ—Ä–∞ –Ω–∞–∂–º–∏—Ç–µ `Ctrl+C`. –í–æ—Ä–∫–µ—Ä –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç —Ä–∞–±–æ—Ç—É –∏ –∑–∞–∫—Ä–æ–µ—Ç –≤—Å–µ —Ä–µ—Å—É—Ä—Å—ã.

### –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–í—Ä–µ–º—è UTC**: –í —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ (MVP) –≤—Å–µ –≤—Ä–µ–º–µ–Ω–∞ —É–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ UTC. –£—á–∏—Ç—ã–≤–∞–π—Ç–µ —Ä–∞–∑–Ω–∏—Ü—É —Å –≤–∞—à–∏–º —á–∞—Å–æ–≤—ã–º –ø–æ—è—Å–æ–º –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π.

2. **–ï–¥–∏–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: –ò Telegram-–±–æ—Ç, –∏ –≤–æ—Ä–∫–µ—Ä –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ —Ñ–∞–π–ª –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (—É–∫–∞–∑–∞–Ω–Ω—ã–π –≤ `REMINDERS_DB_PATH`).

3. **–ù–µ–ø—Ä–µ—Ä—ã–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞**: –í–æ—Ä–∫–µ—Ä –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∑–∞–ø—É—Å–∫–∞—Ç—å –µ–≥–æ –∫–∞–∫ —Ñ–æ–Ω–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å –∏–ª–∏ —Å–ª—É–∂–±—É.

4. **–û—à–∏–±–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏**: –ï—Å–ª–∏ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –æ—à–∏–±–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª –±–æ—Ç–∞), —Å–æ–±—ã—Ç–∏–µ –≤—Å—ë —Ä–∞–≤–Ω–æ –±—É–¥–µ—Ç –ø–æ–º–µ—á–µ–Ω–æ –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–µ. –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏.

## –ü–æ–∏—Å–∫ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ (Stage 2)

–ê—Å—Å–∏—Å—Ç–µ–Ω—Ç ¬´–ö–∏–º¬ª –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –ø–æ–∏—Å–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏:

### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

1. **–ö–æ–º–∞–Ω–¥–∞ Telegram-–±–æ—Ç–∞**: `/web <–∑–∞–ø—Ä–æ—Å>`
2. **–ì–æ–ª–æ—Å–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞**: –ø—Ä–æ–∏–∑–Ω–µ—Å–∏—Ç–µ ¬´–ö–∏–º, –Ω–∞–π–¥–∏ ...¬ª –∏–ª–∏ ¬´–ö–∏–º, –ø–æ–∏—â–∏ ...¬ª
3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–∑–æ–≤ LLM**: LLM –º–æ–∂–µ—Ç —Å–∞–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –≤–µ–±-–ø–æ–∏—Å–∫–∞, –∫–æ–≥–¥–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–≤–µ–∂–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –ö–æ–º–∞–Ω–¥–∞ Telegram-–±–æ—Ç–∞

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É `/web` –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏:

```
/web –ø–æ–≥–æ–¥–∞ –≤ –ú–æ—Å–∫–≤–µ
/web –ø–æ—Å–ª–µ–¥–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏ –ø—Ä–æ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç
/web —á—Ç–æ —Ç–∞–∫–æ–µ Python
```

–ë–æ—Ç –≤–µ—Ä–Ω—ë—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ —Å –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏, –æ–ø–∏—Å–∞–Ω–∏—è–º–∏ –∏ —Å—Å—ã–ª–∫–∞–º–∏.

### –ì–æ–ª–æ—Å–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã

–ü–æ—Å–ª–µ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –ø—Ä–æ–∏–∑–Ω–µ—Å–∏—Ç–µ –æ–¥–Ω—É –∏–∑ –∫–æ–º–∞–Ω–¥:

- ¬´–ö–∏–º, –Ω–∞–π–¥–∏ –ø–æ–≥–æ–¥—É –≤ –ú–æ—Å–∫–≤–µ¬ª
- ¬´–ö–∏–º, –ø–æ–∏—â–∏ –Ω–æ–≤–æ—Å—Ç–∏ –ø—Ä–æ –ò–ò¬ª
- ¬´–ö–∏–º, —á—Ç–æ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ –ø—Ä–æ Python¬ª
- ¬´–ö–∏–º, –∫–∞–∫–∏–µ –Ω–æ–≤–æ—Å—Ç–∏ –ø—Ä–æ –∫–æ—Å–º–æ—Å¬ª

–ê—Å—Å–∏—Å—Ç–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç –ø–æ–∏—Å–∫ –∏ –æ–∑–≤—É—á–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã.

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ —á–µ—Ä–µ–∑ LLM

LLM –º–æ–∂–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –≤–µ–±-–ø–æ–∏—Å–∫–∞, –∫–æ–≥–¥–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–∫—Ç—É–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –≤—ã —Å–ø—Ä–æ—Å–∏—Ç–µ ¬´–ö–∞–∫–∞—è —Å–µ–≥–æ–¥–Ω—è –ø–æ–≥–æ–¥–∞?¬ª, LLM –º–æ–∂–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ–∏—Å–∫ –∏ –ø–æ–ª—É—á–∏—Ç—å —Å–≤–µ–∂–∏–µ –¥–∞–Ω–Ω—ã–µ.

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞

#### SerpAPI (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –±–æ–ª–µ–µ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SerpAPI:

1. –ü–æ–ª—É—á–∏—Ç–µ API-–∫–ª—é—á –Ω–∞ https://serpapi.com (–µ—Å—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω)
2. –î–æ–±–∞–≤—å—Ç–µ –≤ `.env`:
   ```env
   SERPAPI_KEY=your_serpapi_key_here
   ```

#### DuckDuckGo (fallback)

–ï—Å–ª–∏ `SERPAPI_KEY` –Ω–µ —É–∫–∞–∑–∞–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è DuckDuckGo –∫–∞–∫ –±–µ—Å–ø–ª–∞—Ç–Ω–∞—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –º–æ–≥—É—Ç –±—ã—Ç—å –º–µ–Ω–µ–µ —Ç–æ—á–Ω—ã–º–∏, –Ω–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫.

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞

```env
# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 5)
WEB_SEARCH_MAX_RESULTS=5
```

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ DuckDuckGo —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –º–æ–≥—É—Ç –±—ã—Ç—å –º–µ–Ω–µ–µ —Ç–æ—á–Ω—ã–º–∏, —á–µ–º —á–µ—Ä–µ–∑ SerpAPI
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ —Ç–æ–∫–µ–Ω–æ–≤ –∏ —É—Å–∫–æ—Ä–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–∞
- –î–ª–∏–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –º–æ–≥—É—Ç –±—ã—Ç—å –æ–±—Ä–µ–∑–∞–Ω—ã –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –≤—ã–≤–æ–¥–∞

## –í—ã–∂–∏–º–∫–∏ –∏–∑ —Ñ–∞–π–ª–æ–≤ (Stage 2)

–ê—Å—Å–∏—Å—Ç–µ–Ω—Ç ¬´–ö–∏–º¬ª –º–æ–∂–µ—Ç —á–∏—Ç–∞—Ç—å —Ñ–∞–π–ª—ã —Å –¥–∏—Å–∫–∞ –∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∫—Ä–∞—Ç–∫–∏–µ —Ä–µ–∑—é–º–µ –∏—Ö —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ.

### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ß—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤** –∏–∑ –±–µ–ª–æ–≥–æ —Å–ø–∏—Å–∫–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π (–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
- **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã**: `.txt`, `.md`, `.pdf`, `.docx`
- **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∑—é–º–µ** —á–µ—Ä–µ–∑ LLM —Å –≤—ã–¥–µ–ª–µ–Ω–∏–µ–º –∫–ª—é—á–µ–≤—ã—Ö –º–æ–º–µ–Ω—Ç–æ–≤
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** –¥–ª–∏–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ (–æ–±—Ä–µ–∑–∞–Ω–∏–µ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ LLM)

### –ö–æ–º–∞–Ω–¥–∞ Telegram-–±–æ—Ç–∞

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É `/file_summary` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∑—é–º–µ —Ñ–∞–π–ª–∞:

```
/file_summary C:\Users\User\Documents\report.pdf
/file_summary D:\Work\docs\notes.txt
/file_summary /path/to/document.docx
```

–ë–æ—Ç –ø—Ä–æ—á–∏—Ç–∞–µ—Ç —Ñ–∞–π–ª, –∏–∑–≤–ª–µ—á—ë—Ç —Ç–µ–∫—Å—Ç –∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ —Å –∫–ª—é—á–µ–≤—ã–º–∏ —Ç–µ–∑–∏—Å–∞–º–∏.

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

**–í–∞–∂–Ω–æ:** –î–æ—Å—Ç—É–ø –∫ —Ñ–∞–π–ª–∞–º —Å—Ç—Ä–æ–≥–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω –±–µ–ª—ã–º —Å–ø–∏—Å–∫–æ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.

#### –ë–µ–ª—ã–π —Å–ø–∏—Å–æ–∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π

–£–∫–∞–∂–∏—Ç–µ —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –≤ `.env`:

```env
# –ü—É—Ç–∏ —Ä–∞–∑–¥–µ–ª—è—é—Ç—Å—è —Ç–æ—á–∫–æ–π —Å –∑–∞–ø—è—Ç–æ–π (;) –∏–ª–∏ –¥–≤–æ–µ—Ç–æ—á–∏–µ–º (:)
FILE_WHITELIST_DIRS=C:\Users\User\Documents;D:\Work\docs
```

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- –§–∞–π–ª—ã –º–æ–∂–Ω–æ —á–∏—Ç–∞—Ç—å **—Ç–æ–ª—å–∫–æ** –∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –≤ –±–µ–ª–æ–º —Å–ø–∏—Å–∫–µ
- –ü–æ–ø—ã—Ç–∫–∏ —á—Ç–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –∏–∑ –¥—Ä—É–≥–∏—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –±—É–¥—É—Ç –æ—Ç–∫–ª–æ–Ω–µ–Ω—ã
- –í—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º –ª–æ–≥–∏—Ä—É—é—Ç—Å—è

#### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞

```env
# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –≤ –ú–ë (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 10)
FILE_MAX_SIZE_MB=10

# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ —Ç–µ–∫—Å—Ç–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ LLM (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 20000)
FILE_SUMMARY_MAX_CHARS=20000
```

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã

| –§–æ—Ä–º–∞—Ç | –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|------------|----------|
| –¢–µ–∫—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã | `.txt`, `.md` | –û–±—ã—á–Ω—ã–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã (UTF-8, Windows-1251) |
| PDF | `.pdf` | –î–æ–∫—É–º–µ–Ω—Ç—ã PDF (–∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è —Ç–µ–∫—Å—Ç —Å–æ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü) |
| Word | `.docx` | –î–æ–∫—É–º–µ–Ω—Ç—ã Microsoft Word (—Ç–µ–∫—Å—Ç –∏ —Ç–∞–±–ª–∏—Ü—ã) |

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

1. **–†–µ–∑—é–º–µ PDF-–¥–æ–∫—É–º–µ–Ω—Ç–∞:**
   ```
   /file_summary C:\Users\User\Documents\report.pdf
   ```

2. **–†–µ–∑—é–º–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞:**
   ```
   /file_summary D:\Work\notes.txt
   ```

3. **–†–µ–∑—é–º–µ Word-–¥–æ–∫—É–º–µ–Ω—Ç–∞:**
   ```
   /file_summary C:\Users\User\Documents\meeting_notes.docx
   ```

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- –§–∞–π–ª—ã –¥–æ–ª–∂–Ω—ã –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ö –∏–∑ `FILE_WHITELIST_DIRS`
- –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –Ω–µ –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–≤—ã—à–∞—Ç—å `FILE_MAX_SIZE_MB` –ú–ë
- –¢–µ–∫—Å—Ç –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ LLM –æ–±—Ä–µ–∑–∞–µ—Ç—Å—è –¥–æ `FILE_SUMMARY_MAX_CHARS` —Å–∏–º–≤–æ–ª–æ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —É–∫–∞–∑–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã —Ñ–∞–π–ª–æ–≤

### –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ Telegram (–≤–º–µ—Å—Ç–æ —É–∫–∞–∑–∞–Ω–∏—è –ø—É—Ç–∏)
- –ì–æ–ª–æ—Å–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–∞–º–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ (RTF, ODT –∏ —Ç.–¥.)

## –ì–æ–ª–æ—Å ‚Üî Telegram (–æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π) (Stage 2)

–ê—Å—Å–∏—Å—Ç–µ–Ω—Ç ¬´–ö–∏–º¬ª –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Telegram –ø—Ä—è–º–æ –≥–æ–ª–æ—Å–æ–º.

### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ —Å–∫–∞–∑–∞—Ç—å –ö–∏–º –≥–æ–ª–æ—Å–æ–º:
- ¬´–ö–∏–º, –æ—Ç–ø—Ä–∞–≤—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —Ç–µ–ª–µ–≥—Ä–∞–º: –Ø –∑–∞–∫–æ–Ω—á–∏–ª —Ä–∞–±–æ—Ç—É –Ω–∞–¥ –æ—Ç—á—ë—Ç–æ–º.¬ª
- ¬´–ö–∏–º, –æ—Ç–ø—Ä–∞–≤—å –≤ —Ç–µ–ª–µ–≥—Ä–∞–º: –í—Å—Ç—Ä–µ—á–∞ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—Å—è –Ω–∞ 15:00.¬ª
- ¬´–ö–∏–º, —Å–∫–∞–∂–∏ –≤ —Ç–µ–ª–µ–≥—Ä–∞–º: –ë—É–¥—É —á–µ—Ä–µ–∑ 10 –º–∏–Ω—É—Ç.¬ª

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–ê–∫—Ç–∏–≤–∞—Ü–∏—è**: –ü—Ä–æ–∏–∑–Ω–µ—Å–∏—Ç–µ ¬´–ö–∏–º¬ª –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞.
2. **–ö–æ–º–∞–Ω–¥–∞**: –°–∫–∞–∂–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É —Å —Ç–µ–∫—Å—Ç–æ–º —Å–æ–æ–±—â–µ–Ω–∏—è (—Å–º. –≤–∞—Ä–∏–∞–Ω—Ç—ã –≤—ã—à–µ).
3. **–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ**: –ö–∏–º –ø–æ–≤—Ç–æ—Ä–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ —Å–ø—Ä–æ—Å–∏—Ç: ¬´–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ Telegram: "..."?¬ª
4. **–û—Ç–≤–µ—Ç**: –°–∫–∞–∂–∏—Ç–µ ¬´–¥–∞¬ª –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∏–ª–∏ ¬´–Ω–µ—Ç¬ª –¥–ª—è –æ—Ç–º–µ–Ω—ã.
5. **–û—Ç–ø—Ä–∞–≤–∫–∞**: –°–æ–æ–±—â–µ–Ω–∏–µ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —á–∞—Ç Telegram.

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞

–î–ª—è —Ä–∞–±–æ—Ç—ã —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º —Ç–æ–∫–µ–Ω Telegram-–±–æ—Ç–∞, —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–π –≤ keyring:

```python
# –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç –∏–ª–∏ Python:
from kim_core.secret_store import set_secret
set_secret("telegram_bot_token", "your_bot_token_here")

# ID —á–∞—Ç–∞ –∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫—É–¥–∞ –ö–∏–º –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –≥–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
VOICE_TELEGRAM_CHAT_ID=123456789
```

#### –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å Chat ID

–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–±:
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Telegram-–±–æ—Ç–∞: `python -m src.kim_telegram.main`
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É –∫–æ–º–∞–Ω–¥—É: `/myid`
3. –ë–æ—Ç –≤–µ—Ä–Ω—ë—Ç –≤–∞—à Chat ID
4. –î–æ–±–∞–≤—å—Ç–µ —ç—Ç–æ—Ç ID –≤ `.env`: `VOICE_TELEGRAM_CHAT_ID=123456789`

–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã:
- –ß–µ—Ä–µ–∑ –±–æ—Ç–∞ [@userinfobot](https://t.me/userinfobot): –Ω–∞–ø–∏—à–∏—Ç–µ `/start`
- –ß–µ—Ä–µ–∑ –±–æ—Ç–∞ [@RawDataBot](https://t.me/RawDataBot): –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–†–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–µ–∂–∏–º–µ LOCAL_ONLY**: –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ Telegram –Ω–µ —Ç—Ä–µ–±—É–µ—Ç LLM, –ø–æ—ç—Ç–æ–º—É —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –ø—Ä–∏ `LOCAL_ONLY=1`
- **–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π**: –ö–∏–º –≤—Å–µ–≥–¥–∞ —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —Å–ª—É—á–∞–π–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –°–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –∑–∞—Ä–∞–Ω–µ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —á–∞—Ç (VOICE_TELEGRAM_CHAT_ID)
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –í—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- –°–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –æ–¥–∏–Ω –∑–∞—Ä–∞–Ω–µ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —á–∞—Ç
- –ï—Å–ª–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–æ, –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–º–µ–Ω—è–µ—Ç—Å—è (–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
- –¢—Ä–µ–±—É—é—Ç—Å—è: BOT_TOKEN –∏ VOICE_TELEGRAM_CHAT_ID

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Unit-—Ç–µ—Å—Ç—ã

–î–ª—è –∑–∞–ø—É—Å–∫–∞ unit-—Ç–µ—Å—Ç–æ–≤:

```bash
make test
```

–∏–ª–∏

```bash
pytest tests/ -v
```

–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–µ—Å—Ç—ã:
- `tests/test_config.py` ‚Äî —Ç–µ—Å—Ç—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–≤–∞–ª–∏–¥–∞—Ü–∏—è, —Ä–µ–∂–∏–º—ã)
- `tests/test_llm_router.py` ‚Äî —Ç–µ—Å—Ç—ã –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä–∞ LLM (–≤—ã–±–æ—Ä –º–æ–¥–µ–ª–∏, –ª–∏–º–∏—Ç—ã)
- `tests/test_system_diagnostics.py` ‚Äî —Ç–µ—Å—Ç—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ —Å–∏—Å—Ç–µ–º—ã (–º–µ—Ç—Ä–∏–∫–∏, –ø–æ—Ä–æ–≥–∏)

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞

–ü–æ–¥—Ä–æ–±–Ω—ã–π –ø–ª–∞–Ω —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ [`docs/voice_testing_plan.md`](docs/voice_testing_plan.md). –ü–ª–∞–Ω –≤–∫–ª—é—á–∞–µ—Ç —Ç–µ—Å—Ç—ã –¥–ª—è:
- –ë–∞–∑–æ–≤–æ–π —Ä–∞–±–æ—Ç—ã Vosk + –º–∏–∫—Ä–æ—Ñ–æ–Ω
- STT —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
- Hotword –±–µ–∑ –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π
- –ü–æ–ª–Ω–æ–≥–æ –∫–æ–Ω–≤–µ–π–µ—Ä–∞ (hotword ‚Üí STT ‚Üí LLM ‚Üí TTS)
- –ê–¥–∞–ø—Ç–∏–≤–Ω–æ–≥–æ –ø–æ—Ä–æ–≥–∞
- VAD (–µ—Å–ª–∏ –≤–∫–ª—é—á—ë–Ω)
- UX –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Ñ—Ä–∞–∑—ã

## –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

#### –ü—Ä–æ–±–ª–µ–º–∞: –ú–æ–¥–µ–ª—å Vosk –Ω–µ –Ω–∞–π–¥–µ–Ω–∞

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –º–æ–¥–µ–ª—å —Å–∫–∞—á–∞–Ω–∞ –∏ —Ä–∞—Å–ø–∞–∫–æ–≤–∞–Ω–∞ –≤ –ø–∞–ø–∫—É `models/vosk-ru`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç—å –≤ `.env`: `VOSK_MODEL_PATH=models/vosk-ru`
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É: `python scripts/check_voice_system.py`

#### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ –≤ Windows
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –º–∏–∫—Ä–æ—Ñ–æ–Ω –≤–∫–ª—é—á—ë–Ω –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏ Windows
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —É–∫–∞–∑–∞—Ç—å –∏–Ω–¥–µ–∫—Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞: `MIC_DEVICE_INDEX=1` (—É–∑–Ω–∞—Ç—å –∏–Ω–¥–µ–∫—Å: `python -c "import sounddevice as sd; print(sd.query_devices())"`)

#### –ü—Ä–æ–±–ª–µ–º–∞: OPENROUTER_API_KEY –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü–æ–ª—É—á–∏—Ç–µ API-–∫–ª—é—á –Ω–∞ https://openrouter.ai
2. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –≤ keyring: `python scripts/set_secrets.py` –∏–ª–∏ —á–µ—Ä–µ–∑ Python:
   ```python
   from kim_core.secret_store import set_secret
   set_secret("openrouter_api_key", "your-key-here")
   ```
3. –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º: `LOCAL_ONLY=1`

#### –ü—Ä–æ–±–ª–µ–º–∞: Telegram-–±–æ—Ç –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —Å–æ—Ö—Ä–∞–Ω—ë–Ω –ª–∏ `BOT_TOKEN` –≤ keyring:
   ```python
   from kim_core.secret_store import get_secret
   token = get_secret("telegram_bot_token")
   ```
2. –ï—Å–ª–∏ –Ω–µ—Ç ‚Äî —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ —á–µ—Ä–µ–∑ `python scripts/set_secrets.py` (–ø–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω —É [@BotFather](https://t.me/BotFather))
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–æ–∫–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∏ –±–æ—Ç —Å–æ–∑–¥–∞–Ω
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∂–∏–º: –≤ `prod` —Ç—Ä–µ–±—É—é—Ç—Å—è –∏ `BOT_TOKEN`, –∏ `OPENROUTER_API_KEY`

#### –ü—Ä–æ–±–ª–µ–º–∞: Hotword –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É Vosk: `python -m scripts.test_vosk_mic`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–æ–∏–∑–Ω–æ—Å–∏—Ç–µ ¬´–ö–∏–º¬ª —á—ë—Ç–∫–æ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–≥–æ –ø–æ—Ä–æ–≥–∞: `HOTWORD_ADAPTIVE_THRESHOLD=1`
4. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å–Ω–∏–∑—å—Ç–µ –ø–æ—Ä–æ–≥ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –≤ –∫–æ–¥–µ

#### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ—á–∏—Ç–∞–µ–º—ã–µ —Å–∏–º–≤–æ–ª—ã –≤ –ª–æ–≥–∞—Ö (Windows)

**–†–µ—à–µ–Ω–∏–µ:**
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç `run_voice_utf8.ps1` –¥–ª—è –∑–∞–ø—É—Å–∫–∞
2. –ò–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–æ–¥–∏—Ä–æ–≤–∫—É PowerShell –≤—Ä—É—á–Ω—É—é (—Å–º. —Ä–∞–∑–¥–µ–ª ¬´–ó–∞–ø—É—Å–∫ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞¬ª)

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–∏—Å—Ç–µ–º—ã –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:

```bash
python scripts/check_voice_system.py  # –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ–ª–æ—Å–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã
python scripts/check_config.py        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
python scripts/system_check.py        # –û–±—â–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã
```